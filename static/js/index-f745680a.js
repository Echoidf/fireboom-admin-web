import{d as J,o as I,c as x,n as ne,_ as oe,aQ as ue,h as v,ah as _e,k as le,r as u,a as t,w as i,f as W,N as H,P as Z,F as ce,l as pe,aR as e,aL as ee,$ as k,M as me,q as T,aN as S,x as b,m as j,W as C,y as te,t as de,ax as A,aP as ve,aS as be,aT as ge}from"./index-b1c80a62.js";import{a as U}from"./index-71ecdb7d.js";import{m as fe}from"./index-adf42357.js";const Ee=["src"],Ve={name:"SvgIcon"},Ie=J({...Ve,props:{prefix:{type:String,default:"icon"},iconClass:{type:String,required:!1},color:{type:String},size:{type:String,default:"1em"}},setup(y){const g=y;return(D,c)=>(I(),x("img",{src:"../../../public/static/icons/"+g.iconClass+".svg",style:ne("width:"+y.size+";height:"+y.size)},null,12,Ee))}});const ie=oe(Ie,[["__scopeId","data-v-018172d7"]]),he={class:"icon-list"},ye=["onClick"],De={name:"IconSelect"},Oe=J({...De,props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(y,{emit:g}){const c=ue(y,"modelValue"),s=v(!1),m=[],f=v(""),h=v([]),L=v(null);function a(){const E=Object.assign({"../../../public/static/icons/advert.svg":()=>e(()=>import("./advert-e046dbf5.js"),["./advert-e046dbf5.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/api.svg":()=>e(()=>import("./api-000db290.js"),["./api-000db290.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/brand.svg":()=>e(()=>import("./brand-4fa080f8.js"),["./brand-4fa080f8.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/bug.svg":()=>e(()=>import("./bug-75c209bb.js"),["./bug-75c209bb.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/cascader.svg":()=>e(()=>import("./cascader-5a5f35b1.js"),["./cascader-5a5f35b1.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/chart.svg":()=>e(()=>import("./chart-f9274f46.js"),["./chart-f9274f46.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/client.svg":()=>e(()=>import("./client-1761850b.js"),["./client-1761850b.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/close.svg":()=>e(()=>import("./close-431167d1.js"),["./close-431167d1.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/close_all.svg":()=>e(()=>import("./close_all-9a0c17c3.js"),["./close_all-9a0c17c3.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/close_left.svg":()=>e(()=>import("./close_left-39c3e7be.js"),["./close_left-39c3e7be.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/close_other.svg":()=>e(()=>import("./close_other-f99a321d.js"),["./close_other-f99a321d.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/close_right.svg":()=>e(()=>import("./close_right-fa4f67f2.js"),["./close_right-fa4f67f2.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/coupon.svg":()=>e(()=>import("./coupon-e1551255.js"),["./coupon-e1551255.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/dashboard.svg":()=>e(()=>import("./dashboard-09f91683.js"),["./dashboard-09f91683.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/dict.svg":()=>e(()=>import("./dict-c0306c55.js"),["./dict-c0306c55.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/dict_item.svg":()=>e(()=>import("./dict_item-c0dbdf01.js"),["./dict_item-c0dbdf01.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/document.svg":()=>e(()=>import("./document-2088ddc5.js"),["./document-2088ddc5.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/download.svg":()=>e(()=>import("./download-10380263.js"),["./download-10380263.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/drag.svg":()=>e(()=>import("./drag-301e7fec.js"),["./drag-301e7fec.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/edit.svg":()=>e(()=>import("./edit-a1e3e488.js"),["./edit-a1e3e488.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-5e967ad3.js"),["./exit-fullscreen-5e967ad3.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/eye-open.svg":()=>e(()=>import("./eye-open-c6d83bf7.js"),["./eye-open-c6d83bf7.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/eye.svg":()=>e(()=>import("./eye-444e2ff7.js"),["./eye-444e2ff7.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-0c74e12b.js"),["./fullscreen-0c74e12b.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/github.svg":()=>e(()=>import("./github-754472b4.js"),["./github-754472b4.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/goods-list.svg":()=>e(()=>import("./goods-list-204b0055.js"),["./goods-list-204b0055.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/goods.svg":()=>e(()=>import("./goods-4641b78b.js"),["./goods-4641b78b.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/guide.svg":()=>e(()=>import("./guide-f22feca6.js"),["./guide-f22feca6.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/homepage.svg":()=>e(()=>import("./homepage-62f80501.js"),["./homepage-62f80501.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/lab.svg":()=>e(()=>import("./lab-76674d26.js"),["./lab-76674d26.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/language.svg":()=>e(()=>import("./language-20226237.js"),["./language-20226237.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/link.svg":()=>e(()=>import("./link-52312251.js"),["./link-52312251.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/menu.svg":()=>e(()=>import("./menu-e778a8ec.js"),["./menu-e778a8ec.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/message.svg":()=>e(()=>import("./message-ab3668f8.js"),["./message-ab3668f8.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/money.svg":()=>e(()=>import("./money-bc698347.js"),["./money-bc698347.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/monitor.svg":()=>e(()=>import("./monitor-1574d9a4.js"),["./monitor-1574d9a4.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/multi_level.svg":()=>e(()=>import("./multi_level-374ab0ac.js"),["./multi_level-374ab0ac.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/nested.svg":()=>e(()=>import("./nested-925a23f0.js"),["./nested-925a23f0.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/number.svg":()=>e(()=>import("./number-533627f3.js"),["./number-533627f3.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/order.svg":()=>e(()=>import("./order-8cfc8146.js"),["./order-8cfc8146.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/password.svg":()=>e(()=>import("./password-891d8879.js"),["./password-891d8879.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/peoples.svg":()=>e(()=>import("./peoples-9b604379.js"),["./peoples-9b604379.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/perm.svg":()=>e(()=>import("./perm-418cfa61.js"),["./perm-418cfa61.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/publish.svg":()=>e(()=>import("./publish-c71222b0.js"),["./publish-c71222b0.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-7f8e7b01.js"),["./rabbitmq-7f8e7b01.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/rate.svg":()=>e(()=>import("./rate-97af92d7.js"),["./rate-97af92d7.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/redis.svg":()=>e(()=>import("./redis-f7be8eef.js"),["./redis-f7be8eef.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/refresh.svg":()=>e(()=>import("./refresh-01a0125e.js"),["./refresh-01a0125e.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/role.svg":()=>e(()=>import("./role-8bd4f137.js"),["./role-8bd4f137.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/security.svg":()=>e(()=>import("./security-b2c2bb8d.js"),["./security-b2c2bb8d.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/shopping.svg":()=>e(()=>import("./shopping-66287b95.js"),["./shopping-66287b95.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/size.svg":()=>e(()=>import("./size-9381acae.js"),["./size-9381acae.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/skill.svg":()=>e(()=>import("./skill-35158331.js"),["./skill-35158331.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/system.svg":()=>e(()=>import("./system-d8d8a978.js"),["./system-d8d8a978.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/theme.svg":()=>e(()=>import("./theme-23938b7b.js"),["./theme-23938b7b.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/tree.svg":()=>e(()=>import("./tree-1c9c6a30.js"),["./tree-1c9c6a30.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/user.svg":()=>e(()=>import("./user-e47529b5.js"),["./user-e47529b5.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/uv.svg":()=>e(()=>import("./uv-60e54fe5.js"),["./uv-60e54fe5.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/valid_code.svg":()=>e(()=>import("./valid_code-149f4688.js"),["./valid_code-149f4688.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url),"../../../public/static/icons/verify_code.svg":()=>e(()=>import("./verify_code-8f35264f.js"),["./verify_code-8f35264f.js","./index-b1c80a62.js","../css/index-67916441.css"],import.meta.url)});for(const n in E){const P=n.split("public/static/icons/")[1].split(".svg")[0];m.push(P)}h.value=m}function O(){f.value?h.value=m.filter(E=>E.includes(f.value)):h.value=m}function N(E){g("update:modelValue",E),s.value=!1}return _e(L,()=>s.value=!1),le(()=>{a()}),(E,n)=>{const P=u("el-input"),w=u("Icon"),z=u("el-divider"),B=u("el-tooltip"),R=u("el-scrollbar"),F=u("el-popover");return I(),x("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:L},[t(P,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=d=>c.value=d),readonly:"",onClick:n[1]||(n[1]=d=>s.value=!s.value),placeholder:"点击选择图标"},{prepend:i(()=>[t(ie,{"icon-class":c.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(F,{shadow:"none",visible:s.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:i(()=>[W("div",{onClick:n[2]||(n[2]=d=>s.value=!s.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[H(t(w,{icon:"ep:caret-top"},null,512),[[Z,s.value]]),H(t(w,{icon:"ep:caret-bottom"},null,512),[[Z,!s.value]])])]),default:i(()=>[t(P,{class:"p-2",modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=d=>f.value=d),placeholder:"搜索图标",clearable:"",onInput:O},null,8,["modelValue"]),t(z,{"border-style":"dashed"}),t(R,{height:"300px"},{default:i(()=>[W("ul",he,[(I(!0),x(ce,null,pe(h.value,(d,q)=>(I(),x("li",{class:"icon-item",key:q,onClick:K=>N(d)},[t(B,{content:d,placement:"bottom",effect:"dark"},{default:i(()=>[t(ie,{color:"var(--el-text-color-regular)","icon-class":d},null,8,["icon-class"])]),_:2},1032,["content"])],8,ye))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const Pe=oe(Oe,[["__scopeId","data-v-822a4c82"]]),Re={class:"app-container"},Te={class:"dialog-footer"},Ae={name:"cmenu"},Se=J({...Ae,name:"MenuManage",setup(y){const g=v(ee),D=v(!1),c=k({visible:!1}),s=k({visible:!1}),m=k({visible:!1}),f=v([]),h=v([]),L=v([]),a=k({label:"",level:1,path:"",icon:"",sort:1}),O=v(),N=k({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}),E=v();async function n(){D.value=!0;const{error:r,data:o}=await U.query({operationName:"System/Menu/GetMany"});r||(f.value=o.data),D.value=!1}function P(r){E.value=r.id}function w(r){c.visible=!0,r?(c.title="编辑菜单",O.value=r.id,fe(a,r)):(O.value=0,c.title="新增菜单")}function z(){g.value.validate(async r=>{if(r)if(O.value){const{error:o}=await U.mutate({operationName:"System/Menu/UpdateOne",input:{id:O.value,...a}});o||(A.success("修改成功"),R(),n())}else{if(f.value.some(_=>a.label===_.label||a.path===_.path))A.error("新增失败，列表中已存在!");else{const{error:_}=await U.mutate({operationName:"System/Menu/CreateOne",input:{...a}});_||(A.success("新增成功"),R(),n())}D.value=!1}})}function B(r){if(!r)return A.warning("请勾选删除项"),!1;ve.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:o}=await U.mutate({operationName:"System/Menu/DeleteOne",input:{id:r}});o||(A.success("删除成功"),n())}).catch(()=>A.info("已取消删除"))}function R(){c.visible=!1,q()}function F(){s.visible=!1}function d(){m.visible=!1}function q(){g.value.resetFields(),g.value.clearValidate(),a.icon="",a.label="",a.level=1,a.path="",a.sort=1}le(()=>{n()});function K(r){s.title="子菜单",be(r).then(o=>{s.visible=!0,h.value=o.data.data})}function X(r){m.title="子权限",ge(r).then(o=>{m.visible=!0,L.value=o.data.data})}return(r,o)=>{const _=u("el-button"),V=u("Auth"),p=u("el-table-column"),G=u("el-table"),ae=u("el-card"),Y=u("el-input"),M=u("el-form-item"),re=u("el-input-number"),Q=u("el-dialog"),se=me("loading");return I(),x("div",Re,[t(ae,{shadow:"never"},{header:i(()=>[t(V,{value:"/System/Menu/CreateOne"},{default:i(()=>[t(_,{type:"success",onClick:o[0]||(o[0]=l=>w())},{icon:i(()=>[t(T(S),{icon:"ep:plus"})]),default:i(()=>[b(" 新增")]),_:1})]),_:1})]),default:i(()=>[H((I(),j(G,{data:f.value,"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:P,"row-key":"id","default-expand-all":"",border:""},{default:i(()=>[t(p,{label:"菜单名称",width:"200",prop:"label"}),t(p,{label:"菜单路径",align:"center",width:"150",prop:"path"}),t(p,{label:"排序",align:"center",width:"100",prop:"sort"}),t(p,{fixed:"right",align:"center",label:"操作","min-width":"220"},{default:i(l=>[t(V,{value:"/System/Menu/UpdateOne"},{default:i(()=>[t(_,{type:"primary",link:"",size:"small",onClick:C($=>w(l.row),["stop"])},{default:i(()=>[t(T(S),{icon:"ep:edit"}),b("编辑 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/DeleteOne"},{default:i(()=>[t(_,{type:"primary",link:"",size:"small",onClick:C($=>B(l.row.id),["stop"])},{default:i(()=>[t(T(S),{icon:"ep:delete"}),b("删除 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/GetChildrenMenus"},{default:i(()=>[l.row.is_bottom?te("",!0):(I(),j(_,{key:0,type:"primary",link:"",size:"small",onClick:C($=>K(l.row.id),["stop"])},{default:i(()=>[t(T(S),{icon:"ep:edit"}),b("子菜单 ")]),_:2},1032,["onClick"]))]),_:2},1024),t(V,{value:"/System/Menu/GetMenuPerms"},{default:i(()=>[l.row.is_bottom?(I(),j(_,{key:0,type:"primary",link:"",size:"small",onClick:C($=>X(l.row.id),["stop"])},{default:i(()=>[t(T(S),{icon:"ep:edit"}),b("子权限 ")]),_:2},1032,["onClick"])):te("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[se,D.value]])]),_:1}),t(Q,{title:c.title,modelValue:c.visible,"onUpdate:modelValue":o[5]||(o[5]=l=>c.visible=l),onClose:R,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:i(()=>[W("div",Te,[t(V,{value:"/System/Menu/UpdateOne"},{default:i(()=>[t(_,{type:"primary",onClick:z},{default:i(()=>[b("确 定")]),_:1})]),_:1}),t(V,{value:"/System/Menu/UpdateOne"},{default:i(()=>[t(_,{onClick:R},{default:i(()=>[b("取 消")]),_:1})]),_:1})])]),default:i(()=>[t(T(ee),{ref_key:"menuFormRef",ref:g,model:a,rules:N,"label-width":"100px"},{default:i(()=>[t(M,{label:"菜单名称",prop:"label"},{default:i(()=>[t(Y,{modelValue:a.label,"onUpdate:modelValue":o[1]||(o[1]=l=>a.label=l),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(M,{label:"路由路径",prop:"path"},{default:i(()=>[t(Y,{modelValue:a.path,"onUpdate:modelValue":o[2]||(o[2]=l=>a.path=l),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(M,{label:"图标",prop:"icon"},{default:i(()=>[t(Pe,{modelValue:a.icon,"onUpdate:modelValue":o[3]||(o[3]=l=>a.icon=l)},null,8,["modelValue"])]),_:1}),t(M,{label:"排序",prop:"sort"},{default:i(()=>[t(re,{modelValue:a.sort,"onUpdate:modelValue":o[4]||(o[4]=l=>a.sort=l),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(Q,{title:s.title,modelValue:s.visible,"onUpdate:modelValue":o[6]||(o[6]=l=>s.visible=l),onClose:F,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:i(()=>[t(G,{data:h.value,style:{width:"100%"}},{default:i(()=>[t(p,{label:"菜单名称",width:"180",prop:"label"}),t(p,{label:"菜单路径",width:"200",prop:"path"}),t(p,{label:"排序",align:"center",width:"160",prop:"sort"}),t(p,{fixed:"right",align:"center",label:"操作"},{default:i(l=>[t(V,{value:"System/Menu/GetMenuPerms"}),t(_,{type:"primary",link:"",size:"small",onClick:C($=>X(l.row.id),["stop"])},{default:i(()=>[b(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),b("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(Q,{title:m.title,modelValue:m.visible,"onUpdate:modelValue":o[7]||(o[7]=l=>m.visible=l),onClose:d,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:i(()=>[t(G,{data:L.value,style:{width:"100%"}},{default:i(()=>[t(p,{label:"创建时间",width:"200",prop:"createdAt"}),t(p,{label:"是否启用",align:"center",width:"180"},{default:i(l=>[b(de(l===0?"否":"是"),1)]),_:1}),t(p,{label:"方法",align:"center",width:"100",prop:"method"}),t(p,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{Se as default};
