import{d as X,y as ne,b as T,g as L,A as ue,_ as oe,aE as _e,r as d,ai as pe,o as le,a as _,i as t,w as o,f as Q,m as H,Q as K,F as ce,h as me,aF as e,a0 as x,k as de,aG as ve,ax as W,l as O,az as C,e as D,c as ge,t as Z,D as ee,X as G,aB as A,aD as be,N as fe}from"./index-11183741.js";import{a as M}from"./index-65564d26.js";import{m as Ee}from"./index-adf42357.js";import{g as Ve}from"./system-b273f915.js";const he=["src"],De=X({__name:"index",props:{prefix:{type:String,default:"icon"},iconClass:{type:String,required:!1},color:{type:String},size:{type:String,default:"1em"}},setup(r){const v=r;return ne(()=>`#${v.prefix}-${v.iconClass}`),(I,s)=>(T(),L("img",{src:"/public/icons/"+v.iconClass+".svg",style:ue("width:"+r.size+";height:"+r.size)},null,12,he))}});const te=oe(De,[["__scopeId","data-v-765c6ab8"]]),ye={class:"icon-list"},Ie=["onClick"],Oe={name:"IconSelect"},Te=X({...Oe,props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(r,{emit:v}){const s=_e(r,"modelValue"),n=d(!1),c=[],E=d(""),p=d([]),g=d(null);function $(){const h=Object.assign({"/public/icons/advert.svg":()=>e(()=>import("./advert-862960ac.js"),["./advert-862960ac.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/api.svg":()=>e(()=>import("./api-b6a9e00e.js"),["./api-b6a9e00e.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/brand.svg":()=>e(()=>import("./brand-7a082253.js"),["./brand-7a082253.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/bug.svg":()=>e(()=>import("./bug-78c8ebd8.js"),["./bug-78c8ebd8.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/cascader.svg":()=>e(()=>import("./cascader-d54f2773.js"),["./cascader-d54f2773.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/chart.svg":()=>e(()=>import("./chart-27ae8e25.js"),["./chart-27ae8e25.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/client.svg":()=>e(()=>import("./client-8bbe4713.js"),["./client-8bbe4713.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close.svg":()=>e(()=>import("./close-bfebd74a.js"),["./close-bfebd74a.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_all.svg":()=>e(()=>import("./close_all-140594b6.js"),["./close_all-140594b6.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_left.svg":()=>e(()=>import("./close_left-297816e6.js"),["./close_left-297816e6.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_other.svg":()=>e(()=>import("./close_other-71c65192.js"),["./close_other-71c65192.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_right.svg":()=>e(()=>import("./close_right-2a9c727a.js"),["./close_right-2a9c727a.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/coupon.svg":()=>e(()=>import("./coupon-e86d3f58.js"),["./coupon-e86d3f58.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dashboard.svg":()=>e(()=>import("./dashboard-fefb9c27.js"),["./dashboard-fefb9c27.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dict.svg":()=>e(()=>import("./dict-e8c77961.js"),["./dict-e8c77961.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dict_item.svg":()=>e(()=>import("./dict_item-40a34fa9.js"),["./dict_item-40a34fa9.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/document.svg":()=>e(()=>import("./document-f808c830.js"),["./document-f808c830.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/download.svg":()=>e(()=>import("./download-fca89489.js"),["./download-fca89489.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/drag.svg":()=>e(()=>import("./drag-9ceaa990.js"),["./drag-9ceaa990.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/edit.svg":()=>e(()=>import("./edit-7470c44f.js"),["./edit-7470c44f.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-d006e6e4.js"),["./exit-fullscreen-d006e6e4.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/eye-open.svg":()=>e(()=>import("./eye-open-b9a2b14c.js"),["./eye-open-b9a2b14c.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/eye.svg":()=>e(()=>import("./eye-f09b1969.js"),["./eye-f09b1969.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-bc536b49.js"),["./fullscreen-bc536b49.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/github.svg":()=>e(()=>import("./github-f4e4d608.js"),["./github-f4e4d608.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/goods-list.svg":()=>e(()=>import("./goods-list-9bcb3868.js"),["./goods-list-9bcb3868.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/goods.svg":()=>e(()=>import("./goods-13f8b5c8.js"),["./goods-13f8b5c8.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/guide.svg":()=>e(()=>import("./guide-599eeacd.js"),["./guide-599eeacd.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/homepage.svg":()=>e(()=>import("./homepage-d4a9c677.js"),["./homepage-d4a9c677.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/lab.svg":()=>e(()=>import("./lab-6638e45c.js"),["./lab-6638e45c.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/language.svg":()=>e(()=>import("./language-6888ea56.js"),["./language-6888ea56.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/link.svg":()=>e(()=>import("./link-4ff9b25a.js"),["./link-4ff9b25a.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/menu.svg":()=>e(()=>import("./menu-2ca15640.js"),["./menu-2ca15640.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/message.svg":()=>e(()=>import("./message-fb453126.js"),["./message-fb453126.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/money.svg":()=>e(()=>import("./money-c37f4bb4.js"),["./money-c37f4bb4.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/monitor.svg":()=>e(()=>import("./monitor-bdcb6421.js"),["./monitor-bdcb6421.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/multi_level.svg":()=>e(()=>import("./multi_level-3c9799ce.js"),["./multi_level-3c9799ce.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/nested.svg":()=>e(()=>import("./nested-0ae550a8.js"),["./nested-0ae550a8.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/number.svg":()=>e(()=>import("./number-849db357.js"),["./number-849db357.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/order.svg":()=>e(()=>import("./order-a7a8b149.js"),["./order-a7a8b149.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/password.svg":()=>e(()=>import("./password-5ca1098e.js"),["./password-5ca1098e.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/peoples.svg":()=>e(()=>import("./peoples-659b51b7.js"),["./peoples-659b51b7.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/perm.svg":()=>e(()=>import("./perm-4e934ca3.js"),["./perm-4e934ca3.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/publish.svg":()=>e(()=>import("./publish-e01fbda9.js"),["./publish-e01fbda9.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-636b40c7.js"),["./rabbitmq-636b40c7.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/rate.svg":()=>e(()=>import("./rate-9955d6e4.js"),["./rate-9955d6e4.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/redis.svg":()=>e(()=>import("./redis-03fc3845.js"),["./redis-03fc3845.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/refresh.svg":()=>e(()=>import("./refresh-8840dca5.js"),["./refresh-8840dca5.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/role.svg":()=>e(()=>import("./role-976df159.js"),["./role-976df159.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/security.svg":()=>e(()=>import("./security-231298de.js"),["./security-231298de.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/shopping.svg":()=>e(()=>import("./shopping-ccf79a17.js"),["./shopping-ccf79a17.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/size.svg":()=>e(()=>import("./size-2b999944.js"),["./size-2b999944.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/skill.svg":()=>e(()=>import("./skill-962e2c7a.js"),["./skill-962e2c7a.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/system.svg":()=>e(()=>import("./system-20f97c65.js"),["./system-20f97c65.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/theme.svg":()=>e(()=>import("./theme-78cff30e.js"),["./theme-78cff30e.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/tree.svg":()=>e(()=>import("./tree-f8f03299.js"),["./tree-f8f03299.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/user.svg":()=>e(()=>import("./user-6479bcbe.js"),["./user-6479bcbe.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/uv.svg":()=>e(()=>import("./uv-a65eb423.js"),["./uv-a65eb423.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/valid_code.svg":()=>e(()=>import("./valid_code-43ba8408.js"),["./valid_code-43ba8408.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url),"/public/icons/verify_code.svg":()=>e(()=>import("./verify_code-c5956061.js"),["./verify_code-c5956061.js","./index-11183741.js","../css/index-67916441.css"],import.meta.url)});for(const b in h){const y=b.split("/public/icons/")[1].split(".svg")[0];c.push(y)}p.value=c}function k(){E.value?p.value=c.filter(h=>h.includes(E.value)):p.value=c}function a(h){v("update:modelValue",h),n.value=!1}return pe(g,()=>n.value=!1),le(()=>{$()}),(h,b)=>{const y=_("el-input"),P=_("Icon"),U=_("el-divider"),B=_("el-tooltip"),R=_("el-scrollbar"),F=_("el-popover");return T(),L("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:g},[t(y,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=V=>s.value=V),readonly:"",onClick:b[1]||(b[1]=V=>n.value=!n.value),placeholder:"点击选择图标"},{prepend:o(()=>[t(te,{"icon-class":s.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(F,{shadow:"none",visible:n.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:o(()=>[Q("div",{onClick:b[2]||(b[2]=V=>n.value=!n.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[H(t(P,{icon:"ep:caret-top"},null,512),[[K,n.value]]),H(t(P,{icon:"ep:caret-bottom"},null,512),[[K,!n.value]])])]),default:o(()=>[t(y,{class:"p-2",modelValue:E.value,"onUpdate:modelValue":b[3]||(b[3]=V=>E.value=V),placeholder:"搜索图标",clearable:"",onInput:k},null,8,["modelValue"]),t(U,{"border-style":"dashed"}),t(R,{height:"300px"},{default:o(()=>[Q("ul",ye,[(T(!0),L(ce,null,me(p.value,(V,z)=>(T(),L("li",{class:"icon-item",key:z,onClick:Y=>a(V)},[t(B,{content:V,placement:"bottom",effect:"light"},{default:o(()=>[t(te,{color:"var(--el-text-color-regular)","icon-class":V},null,8,["icon-class"])]),_:2},1032,["content"])],8,Ie))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const Pe=oe(Te,[["__scopeId","data-v-456cc732"]]);function Re(r,v){if(arguments.length===0||!r)return null;const I=v||"{y}-{m}-{d} {h}:{i}:{s}";let s;typeof r=="object"?s=r:(typeof r=="string"&&/^[0-9]+$/.test(r)?r=parseInt(r):typeof r=="string"&&(r=r.replace(new RegExp(/-/gm),"/").replace("T"," ").replace(new RegExp(/\.[\d]{3}/gm),"")),typeof r=="number"&&r.toString().length===10&&(r=r*1e3),s=new Date(r));const n={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),a:s.getDay()};return I.replace(/{(y|m|d|h|i|s|a)+}/g,(E,p)=>{let g=n[p];return p==="a"?["日","一","二","三","四","五","六"][g]:(E.length>0&&g<10&&(g="0"+g),g||0)})}const Ae={class:"app-container"},Le={key:0},we={class:"dialog-footer"},Me=X({name:"MenuManage",__name:"index",setup(r){const v=d(W),I=d(!1),s=d(!1),n=d(!0),c=x({visible:!1}),E=x({visible:!1}),p=x({visible:!1}),g=d([]),$=d([]),k=d([]),a=x({label:"",level:1,path:"",icon:"",sort:1}),h=d(),b=x({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]});d();async function y(){I.value=!0;const{error:m,data:l}=await M.query({operationName:"System/Menu/GetMany"});m||(g.value=ve(l.data,"id")),I.value=!1}function P(m){c.visible=!0,m?(c.title="编辑菜单",h.value=m.id,Ee(a,m)):c.title="新增菜单"}function U(){v.value.validate(async m=>{if(m){if(h.value){const{error:l}=await M.mutate({operationName:"System/Menu/UpdateOne",input:{id:h.value,...a}});l||(A.success("修改成功"),R(),y())}else if(g.value.some(f=>f.label===a.label))A.warning("该菜单已存在, 请勿重复添加");else{const{error:f}=await M.mutate({operationName:"System/Menu/CreateOne",input:{...a}});f||(A.success("新增成功"),R(),y())}I.value=!1}})}function B(m){if(!m)return A.warning("请勾选删除项"),!1;be.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:l}=await M.mutate({operationName:"System/Menu/DeleteOne",input:{id:m}});l||(A.success("删除成功"),y())}).catch(()=>A.info("已取消删除"))}function R(){c.visible=!1,z()}function F(){E.visible=!1}function V(){p.visible=!1}function z(){v.value.resetFields(),v.value.clearValidate(),a.icon="",a.label="",a.level=1,a.path="",a.sort=1}le(()=>{y()});function Y(m){p.title="子权限",Ve(m).then(l=>{p.visible=!0,k.value=l.data.data.data})}function ie(){n.value=!1,s.value=!s.value,fe(()=>{n.value=!0})}return(m,l)=>{const f=_("el-button"),w=_("Auth"),u=_("el-table-column"),N=_("el-table"),re=_("el-card"),J=_("el-input"),S=_("el-form-item"),ae=_("el-input-number"),q=_("el-dialog"),se=de("loading");return T(),L("div",Ae,[t(re,{shadow:"never"},{header:o(()=>[t(w,{value:"/System/Menu/CreateOne"},{default:o(()=>[t(f,{type:"success",onClick:l[0]||(l[0]=i=>P())},{icon:o(()=>[t(O(C),{icon:"ep:plus"})]),default:o(()=>[D(" 新增")]),_:1})]),_:1}),t(f,{type:"info",onClick:ie},{default:o(()=>[t(O(C),{icon:"ep:sort"}),D("展开/折叠 ")]),_:1})]),default:o(()=>[n.value?H((T(),ge(N,{key:0,data:g.value,"row-key":"id","default-expand-all":s.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[t(u,{prop:"label",label:"菜单名称","show-overflow-tooltip":!0,width:"160"}),t(u,{prop:"icon",label:"图标",align:"center",width:"100"}),t(u,{prop:"sort",label:"排序",width:"60",align:"center"}),t(u,{prop:"perms",label:"权限标识","show-overflow-tooltip":!0}),t(u,{prop:"path",label:"组件路径","show-overflow-tooltip":!0}),t(u,{label:"创建时间",align:"center",prop:"create_time"},{default:o(i=>[i.row.create_time?(T(),L("span",Le,Z(O(Re)(i.row.create_time,"{y}-{m}-{d} {h}:{i}:{s}")),1)):ee("",!0)]),_:1}),t(u,{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"300"},{default:o(i=>[t(f,{size:"small",type:"text",icon:"el-icon-edit",onClick:G(j=>P(i.row),["stop"])},{default:o(()=>[t(O(C),{icon:"ep:edit"}),D("修改 ")]),_:2},1032,["onClick"]),t(w,{value:"/System/Menu/CreateOne"},{default:o(()=>[t(f,{size:"small",type:"text",icon:"el-icon-plus",onClick:l[1]||(l[1]=G(j=>P(),["stop"]))},{default:o(()=>[t(O(C),{icon:"ep:plus"}),D("新增 ")]),_:1})]),_:1}),t(f,{size:"small",type:"text",icon:"el-icon-delete",onClick:j=>B(i.row)},{default:o(()=>[t(O(C),{icon:"ep:delete"}),D("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","default-expand-all"])),[[se,I.value]]):ee("",!0)]),_:1}),t(q,{title:c.title,modelValue:c.visible,"onUpdate:modelValue":l[6]||(l[6]=i=>c.visible=i),onClose:R,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:o(()=>[Q("div",we,[t(w,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(f,{type:"primary",onClick:U},{default:o(()=>[D("确 定")]),_:1})]),_:1}),t(w,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(f,{onClick:R},{default:o(()=>[D("取 消")]),_:1})]),_:1})])]),default:o(()=>[t(O(W),{ref_key:"menuFormRef",ref:v,model:a,rules:b,"label-width":"100px"},{default:o(()=>[t(S,{label:"菜单名称",prop:"label"},{default:o(()=>[t(J,{modelValue:a.label,"onUpdate:modelValue":l[2]||(l[2]=i=>a.label=i),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(S,{label:"路由路径",prop:"path"},{default:o(()=>[t(J,{modelValue:a.path,"onUpdate:modelValue":l[3]||(l[3]=i=>a.path=i),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(S,{label:"图标",prop:"icon"},{default:o(()=>[t(Pe,{modelValue:a.icon,"onUpdate:modelValue":l[4]||(l[4]=i=>a.icon=i)},null,8,["modelValue"])]),_:1}),t(S,{label:"排序",prop:"sort"},{default:o(()=>[t(ae,{modelValue:a.sort,"onUpdate:modelValue":l[5]||(l[5]=i=>a.sort=i),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(q,{title:E.title,modelValue:E.visible,"onUpdate:modelValue":l[7]||(l[7]=i=>E.visible=i),onClose:F,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(N,{data:$.value,style:{width:"100%"}},{default:o(()=>[t(u,{label:"菜单名称",width:"180",prop:"label"}),t(u,{label:"菜单路径",width:"200",prop:"path"}),t(u,{label:"排序",align:"center",width:"160",prop:"sort"}),t(u,{fixed:"right",align:"center",label:"操作"},{default:o(i=>[t(w,{value:"System/Menu/GetMenuPerms"}),t(f,{type:"primary",link:"",size:"small",onClick:G(j=>Y(i.row.id),["stop"])},{default:o(()=>[D(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),D("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(q,{title:p.title,modelValue:p.visible,"onUpdate:modelValue":l[8]||(l[8]=i=>p.visible=i),onClose:V,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(N,{data:k.value,style:{width:"100%"}},{default:o(()=>[t(u,{label:"创建时间",width:"200",prop:"createdAt"}),t(u,{label:"是否启用",align:"center",width:"180"},{default:o(i=>[D(Z(i===0?"否":"是"),1)]),_:1}),t(u,{label:"方法",align:"center",width:"100",prop:"method"}),t(u,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{Me as default};
