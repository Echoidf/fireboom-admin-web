import{d as J,y as se,b as V,g as S,A as ue,_ as ie,aE as _e,r as d,ai as pe,o as le,a as u,i as t,w as o,f as X,m as H,Q as Z,F as ce,h as me,aF as e,a0 as w,k as de,ax as ee,l as R,az as k,e as b,c as j,X as x,D as te,t as ve,aB as C,aD as be}from"./index-aec91119.js";import{a as U}from"./index-d165d169.js";import{m as ge}from"./index-adf42357.js";import{g as Ee,a as fe}from"./system-5d287439.js";const Ve=["src"],De=J({__name:"index",props:{prefix:{type:String,default:"icon"},iconClass:{type:String,required:!1},color:{type:String},size:{type:String,default:"1em"}},setup(O){const v=O;return se(()=>`#${v.prefix}-${v.iconClass}`),(h,_)=>(V(),S("img",{src:"/public/icons/"+v.iconClass+".svg",style:ue("width:"+O.size+";height:"+O.size)},null,12,Ve))}});const oe=ie(De,[["__scopeId","data-v-765c6ab8"]]),Ie={class:"icon-list"},Oe=["onClick"],he={name:"IconSelect"},ye=J({...he,props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(O,{emit:v}){const _=_e(O,"modelValue"),n=d(!1),c=[],D=d(""),I=d([]),T=d(null);function r(){const g=Object.assign({"/public/icons/advert.svg":()=>e(()=>import("./advert-9a66f9f8.js"),["./advert-9a66f9f8.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/api.svg":()=>e(()=>import("./api-cc9d2086.js"),["./api-cc9d2086.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/brand.svg":()=>e(()=>import("./brand-6ce0a366.js"),["./brand-6ce0a366.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/bug.svg":()=>e(()=>import("./bug-7f42b30d.js"),["./bug-7f42b30d.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/cascader.svg":()=>e(()=>import("./cascader-267f7f2a.js"),["./cascader-267f7f2a.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/chart.svg":()=>e(()=>import("./chart-f0ad10ed.js"),["./chart-f0ad10ed.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/client.svg":()=>e(()=>import("./client-c1689d3b.js"),["./client-c1689d3b.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close.svg":()=>e(()=>import("./close-f94ff9b2.js"),["./close-f94ff9b2.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_all.svg":()=>e(()=>import("./close_all-256bddf3.js"),["./close_all-256bddf3.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_left.svg":()=>e(()=>import("./close_left-5419dc85.js"),["./close_left-5419dc85.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_other.svg":()=>e(()=>import("./close_other-3748c2e3.js"),["./close_other-3748c2e3.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/close_right.svg":()=>e(()=>import("./close_right-c7da8088.js"),["./close_right-c7da8088.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/coupon.svg":()=>e(()=>import("./coupon-396a8c3d.js"),["./coupon-396a8c3d.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dashboard.svg":()=>e(()=>import("./dashboard-36288215.js"),["./dashboard-36288215.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dict.svg":()=>e(()=>import("./dict-c2fe50c5.js"),["./dict-c2fe50c5.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/dict_item.svg":()=>e(()=>import("./dict_item-223d939e.js"),["./dict_item-223d939e.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/document.svg":()=>e(()=>import("./document-1df8e7dc.js"),["./document-1df8e7dc.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/download.svg":()=>e(()=>import("./download-e23405a0.js"),["./download-e23405a0.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/drag.svg":()=>e(()=>import("./drag-c0dcd65e.js"),["./drag-c0dcd65e.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/edit.svg":()=>e(()=>import("./edit-4f1cb4a1.js"),["./edit-4f1cb4a1.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-72397dc1.js"),["./exit-fullscreen-72397dc1.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/eye-open.svg":()=>e(()=>import("./eye-open-687c834e.js"),["./eye-open-687c834e.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/eye.svg":()=>e(()=>import("./eye-da0df7a6.js"),["./eye-da0df7a6.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-46b6ee55.js"),["./fullscreen-46b6ee55.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/github.svg":()=>e(()=>import("./github-0766f345.js"),["./github-0766f345.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/goods-list.svg":()=>e(()=>import("./goods-list-8991d9f7.js"),["./goods-list-8991d9f7.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/goods.svg":()=>e(()=>import("./goods-f6d1bf7c.js"),["./goods-f6d1bf7c.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/guide.svg":()=>e(()=>import("./guide-9afb9ba2.js"),["./guide-9afb9ba2.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/homepage.svg":()=>e(()=>import("./homepage-d7873fb1.js"),["./homepage-d7873fb1.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/lab.svg":()=>e(()=>import("./lab-99ab5819.js"),["./lab-99ab5819.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/language.svg":()=>e(()=>import("./language-d8506f00.js"),["./language-d8506f00.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/link.svg":()=>e(()=>import("./link-7325de97.js"),["./link-7325de97.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/menu.svg":()=>e(()=>import("./menu-747ede82.js"),["./menu-747ede82.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/message.svg":()=>e(()=>import("./message-3b64ec75.js"),["./message-3b64ec75.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/money.svg":()=>e(()=>import("./money-f811f39b.js"),["./money-f811f39b.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/monitor.svg":()=>e(()=>import("./monitor-3faf7103.js"),["./monitor-3faf7103.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/multi_level.svg":()=>e(()=>import("./multi_level-40fb4a63.js"),["./multi_level-40fb4a63.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/nested.svg":()=>e(()=>import("./nested-fca0ea01.js"),["./nested-fca0ea01.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/number.svg":()=>e(()=>import("./number-a0f2a1d6.js"),["./number-a0f2a1d6.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/order.svg":()=>e(()=>import("./order-0d7dd91f.js"),["./order-0d7dd91f.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/password.svg":()=>e(()=>import("./password-94fb50ba.js"),["./password-94fb50ba.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/peoples.svg":()=>e(()=>import("./peoples-05631b10.js"),["./peoples-05631b10.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/perm.svg":()=>e(()=>import("./perm-90d014a6.js"),["./perm-90d014a6.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/publish.svg":()=>e(()=>import("./publish-df97648e.js"),["./publish-df97648e.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-5efe42df.js"),["./rabbitmq-5efe42df.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/rate.svg":()=>e(()=>import("./rate-fa43a82e.js"),["./rate-fa43a82e.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/redis.svg":()=>e(()=>import("./redis-341c87f5.js"),["./redis-341c87f5.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/refresh.svg":()=>e(()=>import("./refresh-57c3ab7a.js"),["./refresh-57c3ab7a.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/role.svg":()=>e(()=>import("./role-acff1982.js"),["./role-acff1982.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/security.svg":()=>e(()=>import("./security-29b62a9d.js"),["./security-29b62a9d.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/shopping.svg":()=>e(()=>import("./shopping-f347d1c0.js"),["./shopping-f347d1c0.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/size.svg":()=>e(()=>import("./size-14f92a8d.js"),["./size-14f92a8d.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/skill.svg":()=>e(()=>import("./skill-fe8d21e1.js"),["./skill-fe8d21e1.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/system.svg":()=>e(()=>import("./system-bb84c40b.js"),["./system-bb84c40b.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/theme.svg":()=>e(()=>import("./theme-0b695a1a.js"),["./theme-0b695a1a.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/tree.svg":()=>e(()=>import("./tree-65d15256.js"),["./tree-65d15256.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/user.svg":()=>e(()=>import("./user-60f5258b.js"),["./user-60f5258b.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/uv.svg":()=>e(()=>import("./uv-2efa83bc.js"),["./uv-2efa83bc.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/valid_code.svg":()=>e(()=>import("./valid_code-85962fc6.js"),["./valid_code-85962fc6.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url),"/public/icons/verify_code.svg":()=>e(()=>import("./verify_code-70eeab06.js"),["./verify_code-70eeab06.js","./index-aec91119.js","../css/index-67916441.css"],import.meta.url)});for(const s in g){const y=s.split("/public/icons/")[1].split(".svg")[0];c.push(y)}I.value=c}function A(){D.value?I.value=c.filter(g=>g.includes(D.value)):I.value=c}function z(g){v("update:modelValue",g),n.value=!1}return pe(T,()=>n.value=!1),le(()=>{r()}),(g,s)=>{const y=u("el-input"),L=u("Icon"),B=u("el-divider"),F=u("el-tooltip"),P=u("el-scrollbar"),N=u("el-popover");return V(),S("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:T},[t(y,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=m=>_.value=m),readonly:"",onClick:s[1]||(s[1]=m=>n.value=!n.value),placeholder:"点击选择图标"},{prepend:o(()=>[t(oe,{"icon-class":_.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(N,{shadow:"none",visible:n.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:o(()=>[X("div",{onClick:s[2]||(s[2]=m=>n.value=!n.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[H(t(L,{icon:"ep:caret-top"},null,512),[[Z,n.value]]),H(t(L,{icon:"ep:caret-bottom"},null,512),[[Z,!n.value]])])]),default:o(()=>[t(y,{class:"p-2",modelValue:D.value,"onUpdate:modelValue":s[3]||(s[3]=m=>D.value=m),placeholder:"搜索图标",clearable:"",onInput:A},null,8,["modelValue"]),t(B,{"border-style":"dashed"}),t(P,{height:"300px"},{default:o(()=>[X("ul",Ie,[(V(!0),S(ce,null,me(I.value,(m,q)=>(V(),S("li",{class:"icon-item",key:q,onClick:K=>z(m)},[t(F,{content:m,placement:"bottom",effect:"light"},{default:o(()=>[t(oe,{color:"var(--el-text-color-regular)","icon-class":m},null,8,["icon-class"])]),_:2},1032,["content"])],8,Oe))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const Pe=ie(ye,[["__scopeId","data-v-456cc732"]]),Re={class:"app-container"},Te={class:"dialog-footer"},xe=J({name:"MenuManage",__name:"index",setup(O){const v=d(ee),h=d(!1),_=w({visible:!1}),n=w({visible:!1}),c=w({visible:!1}),D=d([]),I=d([]),T=d([]),r=w({label:"",level:1,path:"",icon:"",sort:1}),A=d(),z=w({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}),g=d();async function s(){h.value=!0;const{error:a,data:i}=await U.query({operationName:"System/Menu/GetMany"});a||(D.value=i.data),h.value=!1}function y(a){g.value=a.id}function L(a){_.visible=!0,a?(_.title="编辑菜单",A.value=a.id,ge(r,a)):_.title="新增菜单"}function B(){v.value.validate(async a=>{if(a){if(A.value){const{error:i}=await U.mutate({operationName:"System/Menu/UpdateOne",input:{id:A.value,...r}});i||(C.success("修改成功"),P(),s())}else{const{error:i}=await U.mutate({operationName:"System/Menu/CreateOne",input:{...r}});i||(C.success("新增成功"),P(),s())}h.value=!1}})}function F(a){if(!a)return C.warning("请勾选删除项"),!1;be.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:i}=await U.mutate({operationName:"System/Menu/DeleteOne",input:{id:a}});i||(C.success("删除成功"),s())}).catch(()=>C.info("已取消删除"))}function P(){_.visible=!1,q()}function N(){n.visible=!1}function m(){c.visible=!1}function q(){v.value.resetFields(),v.value.clearValidate(),r.icon="",r.label="",r.level=1,r.path="",r.sort=1}le(()=>{s()});function K(a){n.title="子菜单",Ee(a).then(i=>{n.visible=!0,I.value=i.data.data.data})}function W(a){c.title="子权限",fe(a).then(i=>{c.visible=!0,T.value=i.data.data.data})}return(a,i)=>{const E=u("el-button"),f=u("Auth"),p=u("el-table-column"),G=u("el-table"),re=u("el-card"),Y=u("el-input"),M=u("el-form-item"),ae=u("el-input-number"),Q=u("el-dialog"),ne=de("loading");return V(),S("div",Re,[t(re,{shadow:"never"},{header:o(()=>[t(f,{value:"/System/Menu/CreateOne"},{default:o(()=>[t(E,{type:"success",onClick:i[0]||(i[0]=l=>L())},{icon:o(()=>[t(R(k),{icon:"ep:plus"})]),default:o(()=>[b(" 新增")]),_:1})]),_:1})]),default:o(()=>[H((V(),j(G,{data:D.value,"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:y,"row-key":"id","default-expand-all":"",border:""},{default:o(()=>[t(p,{label:"菜单名称",width:"200",prop:"label"}),t(p,{label:"菜单路径",align:"center",width:"150",prop:"path"}),t(p,{label:"排序",align:"center",width:"100",prop:"sort"}),t(p,{fixed:"right",align:"center",label:"操作","min-width":"220"},{default:o(l=>[t(f,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>L(l.row),["stop"])},{default:o(()=>[t(R(k),{icon:"ep:edit"}),b("编辑 ")]),_:2},1032,["onClick"])]),_:2},1024),t(f,{value:"/System/Menu/DeleteOne"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>F(l.row.id),["stop"])},{default:o(()=>[t(R(k),{icon:"ep:delete"}),b("删除 ")]),_:2},1032,["onClick"])]),_:2},1024),t(f,{value:"/System/Menu/GetChildrenMenus"},{default:o(()=>[l.row.is_bottom?te("",!0):(V(),j(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>K(l.row.id),["stop"])},{default:o(()=>[t(R(k),{icon:"ep:edit"}),b("子菜单 ")]),_:2},1032,["onClick"]))]),_:2},1024),t(f,{value:"/System/Menu/GetMenuPerms"},{default:o(()=>[l.row.is_bottom?(V(),j(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>W(l.row.id),["stop"])},{default:o(()=>[t(R(k),{icon:"ep:edit"}),b("子权限 ")]),_:2},1032,["onClick"])):te("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ne,h.value]])]),_:1}),t(Q,{title:_.title,modelValue:_.visible,"onUpdate:modelValue":i[5]||(i[5]=l=>_.visible=l),onClose:P,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:o(()=>[X("div",Te,[t(f,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{type:"primary",onClick:B},{default:o(()=>[b("确 定")]),_:1})]),_:1}),t(f,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{onClick:P},{default:o(()=>[b("取 消")]),_:1})]),_:1})])]),default:o(()=>[t(R(ee),{ref_key:"menuFormRef",ref:v,model:r,rules:z,"label-width":"100px"},{default:o(()=>[t(M,{label:"菜单名称",prop:"label"},{default:o(()=>[t(Y,{modelValue:r.label,"onUpdate:modelValue":i[1]||(i[1]=l=>r.label=l),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(M,{label:"路由路径",prop:"path"},{default:o(()=>[t(Y,{modelValue:r.path,"onUpdate:modelValue":i[2]||(i[2]=l=>r.path=l),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(M,{label:"图标",prop:"icon"},{default:o(()=>[t(Pe,{modelValue:r.icon,"onUpdate:modelValue":i[3]||(i[3]=l=>r.icon=l)},null,8,["modelValue"])]),_:1}),t(M,{label:"排序",prop:"sort"},{default:o(()=>[t(ae,{modelValue:r.sort,"onUpdate:modelValue":i[4]||(i[4]=l=>r.sort=l),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(Q,{title:n.title,modelValue:n.visible,"onUpdate:modelValue":i[6]||(i[6]=l=>n.visible=l),onClose:N,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(G,{data:I.value,style:{width:"100%"}},{default:o(()=>[t(p,{label:"菜单名称",width:"180",prop:"label"}),t(p,{label:"菜单路径",width:"200",prop:"path"}),t(p,{label:"排序",align:"center",width:"160",prop:"sort"}),t(p,{fixed:"right",align:"center",label:"操作"},{default:o(l=>[t(f,{value:"System/Menu/GetMenuPerms"}),t(E,{type:"primary",link:"",size:"small",onClick:x($=>W(l.row.id),["stop"])},{default:o(()=>[b(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),b("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(Q,{title:c.title,modelValue:c.visible,"onUpdate:modelValue":i[7]||(i[7]=l=>c.visible=l),onClose:m,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(G,{data:T.value,style:{width:"100%"}},{default:o(()=>[t(p,{label:"创建时间",width:"200",prop:"createdAt"}),t(p,{label:"是否启用",align:"center",width:"180"},{default:o(l=>[b(ve(l===0?"否":"是"),1)]),_:1}),t(p,{label:"方法",align:"center",width:"100",prop:"method"}),t(p,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{xe as default};
