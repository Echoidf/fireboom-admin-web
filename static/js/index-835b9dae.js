import{aZ as re}from"./index-26a832c3.js";var X={},T={},Y={},b={},Z={},M={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OBJECT=t.isUndefined=t.isFunction=t.UNDEFINED=t.noop=void 0;const e=()=>{};t.noop=e,t.UNDEFINED=(0,t.noop)();const r=i=>typeof i=="function";t.isFunction=r;const n=i=>i===t.UNDEFINED;t.isUndefined=n,t.OBJECT=Object})(M);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stableHash=void 0;const e=M,r=new WeakMap;let n=0;const i=s=>{const a=typeof s,l=s&&s.constructor,u=l==Date;let o,f;if((0,e.OBJECT)(s)===s&&!u&&l!=RegExp){if(o=r.get(s),o)return o;if(o=++n+"~",r.set(s,o),l==Array){for(o="@",f=0;f<s.length;f++)o+=(0,t.stableHash)(s[f])+",";r.set(s,o)}if(l==e.OBJECT){o="#";const c=e.OBJECT.keys(s).sort();for(;!(0,e.isUndefined)(f=c.pop());)(0,e.isUndefined)(s[f])||(o+=f+":"+(0,t.stableHash)(s[f])+",");r.set(s,o)}}else o=u?s.toJSON():a=="symbol"?s.toString():a=="string"?JSON.stringify(s):""+s;return o};t.stableHash=i})(Z);Object.defineProperty(b,"__esModule",{value:!0});b.serialize=void 0;const ne=Z,se=M,ie=t=>ae(t)[0];b.serialize=ie;const ae=t=>{if((0,se.isFunction)(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?(0,ne.stableHash)(t):"",[t,e]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=b;Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}})})(Y);var g={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.ResponseError=void 0;class G extends Error{constructor(e="Response is not OK",r){super(e),this.message=e,this.statusCode=r,this.errors=void 0,this.name="ResponseError",Object.setPrototypeOf(this,G.prototype)}}E.ResponseError=G;Object.defineProperty(g,"__esModule",{value:!0});g.GraphQLResponseError=void 0;const oe=E;class F extends oe.ResponseError{constructor(e){super(e[0].message,200),this.errors=e,this.name="GraphQLError",Object.setPrototypeOf(this,F.prototype)}}g.GraphQLResponseError=F;var S={};Object.defineProperty(S,"__esModule",{value:!0});S.InputValidationError=void 0;const le=E;class H extends le.ResponseError{constructor(e,r){super(e.message,r),this.statusCode=r,this.name="InputValidationError",this.errors=e.errors,Object.setPrototypeOf(this,H.prototype)}}S.InputValidationError=H;var N={};Object.defineProperty(N,"__esModule",{value:!0});N.AuthorizationError=void 0;const ue=E;class z extends ue.ResponseError{constructor(e="Not authorized",r){super(e,r),this.message=e,this.statusCode=r,this.name="AuthorizationError",Object.setPrototypeOf(this,z.prototype)}}N.AuthorizationError=z;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var fe=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ce=Object.prototype.hasOwnProperty;function I(t,e){return ce.call(t,e)}function D(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var n=[];for(var i in t)I(t,i)&&n.push(i);return n}function p(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function C(t){for(var e=0,r=t.length,n;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function w(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function j(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function q(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(q(t[e]))return!0}else if(typeof t=="object"){for(var n=D(t),i=n.length,s=0;s<i;s++)if(q(t[n[s]]))return!0}}return!1}function x(t,e){var r=[t];for(var n in e){var i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&r.push(n+": "+i)}return r.join(`
`)}var $=function(t){fe(e,t);function e(r,n,i,s,a){var l=this.constructor,u=t.call(this,x(r,{name:n,index:i,operation:s,tree:a}))||this;return u.name=n,u.index=i,u.operation=s,u.tree=a,Object.setPrototypeOf(u,l.prototype),u.message=x(r,{name:n,index:i,operation:s,tree:a}),u}return e}(Error),h=$,he=p,A={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){var n=O(r,this.path);n&&(n=p(n));var i=y(r,{op:"remove",path:this.from}).removed;return y(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){var n=O(r,this.from);return y(r,{op:"add",path:this.path,value:p(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:_(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},de={add:function(t,e,r){return C(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:A.move,copy:A.copy,test:A.test,_get:A._get};function O(t,e){if(e=="")return t;var r={op:"_get",path:e};return y(t,r),r.value}function y(t,e,r,n,i,s){if(r===void 0&&(r=!1),n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=0),r&&(typeof r=="function"?r(e,0,t,e.path):R(e,0)),e.path===""){var a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=O(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=_(t,e.value),a.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new h("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{n||(t=p(t));var l=e.path||"",u=l.split("/"),o=t,f=1,c=u.length,v=void 0,d=void 0,L=void 0;for(typeof r=="function"?L=r:L=R;;){if(d=u[f],d&&d.indexOf("~")!=-1&&(d=j(d)),i&&(d=="__proto__"||d=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&v===void 0&&(o[d]===void 0?v=u.slice(0,f).join("/"):f==c-1&&(v=e.path),v!==void 0&&L(e,0,t,v)),f++,Array.isArray(o)){if(d==="-")d=o.length;else{if(r&&!C(d))throw new h("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);C(d)&&(d=~~d)}if(f>=c){if(r&&e.op==="add"&&d>o.length)throw new h("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var a=de[e.op].call(e,o,d,t);if(a.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a}}else if(f>=c){var a=A[e.op].call(e,o,d,t);if(a.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a}if(o=o[d],r&&f<c&&(!o||typeof o!="object"))throw new h("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function U(t,e,r,n,i){if(n===void 0&&(n=!0),i===void 0&&(i=!0),r&&!Array.isArray(e))throw new h("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=p(t));for(var s=new Array(e.length),a=0,l=e.length;a<l;a++)s[a]=y(t,e[a],r,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function V(t,e,r){var n=y(t,e);if(n.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function R(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new h("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(A[t.op]){if(typeof t.path!="string")throw new h("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new h('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new h("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new h("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&q(t.value))throw new h("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new h("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new h("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=J([a],r);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new h("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new h("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function J(t,e,r){try{if(!Array.isArray(t))throw new h("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)U(p(e),p(t),r||!0);else{r=r||R;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof h)return i;throw i}}function _(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,a;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!_(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!_(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}const pe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:h,_areEquals:_,applyOperation:y,applyPatch:U,applyReducer:V,deepClone:he,getValueByPointer:O,validate:J,validator:R},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Q=new WeakMap,ve=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),we=function(){function t(e,r){this.callback=e,this.observer=r}return t}();function ye(t){return Q.get(t)}function Ee(t,e){return t.observers.get(e)}function Ae(t,e){t.observers.delete(e.callback)}function k(t,e){e.unobserve()}function ee(t,e){var r=[],n,i=ye(t);if(!i)i=new ve(t),Q.set(t,i);else{var s=Ee(i,e);n=s&&s.observer}if(n)return n;if(n={},i.value=p(t),e){n.callback=e,n.next=null;var a=function(){P(n)},l=function(){clearTimeout(n.next),n.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return n.patches=r,n.object=t,n.unobserve=function(){P(n),clearTimeout(n.next),Ae(i,n),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},i.observers.set(e,new we(e,n)),n}function P(t,e){e===void 0&&(e=!1);var r=Q.get(t.object);B(r.value,t.object,t.patches,"",e),t.patches.length&&U(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function B(t,e,r,n,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=D(e),a=D(t),l=!1,u=a.length-1;u>=0;u--){var o=a[u],f=t[o];if(I(e,o)&&!(e[o]===void 0&&f!==void 0&&Array.isArray(e)===!1)){var c=e[o];typeof f=="object"&&f!=null&&typeof c=="object"&&c!=null&&Array.isArray(f)===Array.isArray(c)?B(f,c,r,n+"/"+w(o),i):f!==c&&(i&&r.push({op:"test",path:n+"/"+w(o),value:p(f)}),r.push({op:"replace",path:n+"/"+w(o),value:p(c)}))}else Array.isArray(t)===Array.isArray(e)?(i&&r.push({op:"test",path:n+"/"+w(o),value:p(f)}),r.push({op:"remove",path:n+"/"+w(o)}),l=!0):(i&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}))}if(!(!l&&s.length==a.length))for(var u=0;u<s.length;u++){var o=s[u];!I(t,o)&&e[o]!==void 0&&r.push({op:"add",path:n+"/"+w(o),value:p(e[o])})}}}function te(t,e,r){r===void 0&&(r=!1);var n=[];return B(t,e,n,"",r),n}const _e=Object.freeze(Object.defineProperty({__proto__:null,compare:te,generate:P,observe:ee,unobserve:k},Symbol.toStringTag,{value:"Module"})),me=Object.assign({},pe,_e,{JsonPatchError:$,deepClone:p,escapePathComponent:w,unescapePathComponent:j}),Oe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:$,_areEquals:_,applyOperation:y,applyPatch:U,applyReducer:V,compare:te,deepClone:p,default:me,escapePathComponent:w,generate:P,getValueByPointer:O,observe:ee,unescapePathComponent:j,unobserve:k,validate:J,validator:R},Symbol.toStringTag,{value:"Module"})),Re=re(Oe);Object.defineProperty(T,"__esModule",{value:!0});T.Client=void 0;const ge=Y,Se=g,m=E,Pe=S,Te=N,W=Re;class be{constructor(e){var r;this.options=e,this.baseHeaders={},this.extraHeaders={},this.csrfEnabled=!0,this.baseHeaders={"WG-SDK-Version":e.sdkVersion},this.extraHeaders={...e.extraHeaders},this.csrfEnabled=(r=e.csrfEnabled)!==null&&r!==void 0?r:!0}static buildCacheKey(e){return(0,ge.serialize)(e)}isAuthenticatedOperation(e){var r,n;return!!(!((n=(r=this.options.operationMetadata)===null||r===void 0?void 0:r[e])===null||n===void 0)&&n.requiresAuthentication)}operationUrl(e){return this.options.baseURL+"/operations/"+e}addUrlParams(e,r){r.sort();const n=this.encodeQueryParams(r);return e+(n?`?${n}`:"")}encodeQueryParams(e){const n=e.toString().replace("=&","&");return n.endsWith("=")?n.slice(0,-1):n}async fetchJson(e,r={}){return r.headers={...r.headers,Accept:"application/json","Content-Type":"application/json"},this.fetch(e,r)}async fetch(e,r={}){const n=this.options.customFetch||globalThis.fetch;return r.headers={...this.baseHeaders,...this.extraHeaders,...r.headers},n(e,{credentials:"include",mode:"cors",...r})}convertGraphQLResponse(e){return e.errors&&e.errors.length?{error:new Se.GraphQLResponseError(e.errors)}:e.data?{data:e.data}:{error:new m.ResponseError("Invalid response from the server",200)}}async handleClientResponseError(e){var r,n;const i=await e.text();try{const s=JSON.parse(i);switch(e.status){case 401:return new Te.AuthorizationError((r=s.errors[0])===null||r===void 0?void 0:r.message.trim(),e.status);case 400:return new Pe.InputValidationError(s,e.status);default:return new m.ResponseError((((n=s.errors[0])===null||n===void 0?void 0:n.message)||s.message).trim(),e.status)}}catch{return new m.ResponseError(i.length?i.trim():"Response is not OK",e.status)}}async fetchResponseToClientResponse(e){if(!e.ok)return{error:await this.handleClientResponseError(e)};const r=await e.json();return this.convertGraphQLResponse({data:r.data,errors:r.errors})}stringifyInput(e){const r=JSON.stringify(e||{});return r==="{}"?void 0:r}setExtraHeaders(e){this.extraHeaders={...this.extraHeaders,...e}}setAuthorizationToken(e){this.setExtraHeaders({Authorization:`Bearer ${e}`})}unsetAuthorization(){delete this.extraHeaders.Authorization}async query(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash}),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.subscribeOnce&&r.set("wg_subscribe_once","");const i=this.addUrlParams(this.operationUrl(e.operationName),r),s=await this.fetchJson(i,{method:"GET",signal:e.abortSignal});return this.fetchResponseToClientResponse(s)}async getCSRFToken(){if(!this.csrfToken){const e=await this.fetch(`${this.options.baseURL}/auth/cookie/csrf`,{headers:{...this.baseHeaders,Accept:"text/plain"}});if(this.csrfToken=await e.text(),!this.csrfToken)throw new Error("Failed to get CSRF token. Please make sure you are authenticated.")}return this.csrfToken}async mutate(e){const r=this.addUrlParams(this.operationUrl(e.operationName),new URLSearchParams({wg_api_hash:this.options.applicationHash})),n={};this.isAuthenticatedOperation(e.operationName)&&this.csrfEnabled&&(n["X-CSRF-Token"]=await this.getCSRFToken());const i=await this.fetchJson(r,{method:"POST",signal:e.abortSignal,body:this.stringifyInput(e.input),headers:n});return this.fetchResponseToClientResponse(i)}async fetchUser(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash});e!=null&&e.revalidate&&r.set("revalidate","");const n=await this.fetchJson(this.addUrlParams(`${this.options.baseURL}/auth/user`,r),{method:"GET",signal:e==null?void 0:e.abortSignal});if(!n.ok)throw await this.handleClientResponseError(n);return n.json()}async subscribe(e,r){if(e.subscribeOnce){const n=await this.query(e);return r(n),n}if("EventSource"in globalThis)return this.subscribeWithSSE(e,r);for await(const n of this.subscribeWithFetch(e))r(n)}subscribeWithSSE(e,r){return new Promise((n,i)=>{const s=new URLSearchParams({wg_api_hash:this.options.applicationHash,wg_sse:"",wg_json_patch:""}),a=this.stringifyInput(e.input);a&&s.set("wg_variables",a),e.liveQuery&&s.set("wg_live","");const l=this.addUrlParams(this.operationUrl(e.operationName),s),u=new EventSource(l,{withCredentials:!0});u.addEventListener("error",()=>{i(new Error(`SSE connection error: ${e.operationName}`))}),u.addEventListener("open",()=>{n()});let o=null;u.addEventListener("message",f=>{if(f.data==="done"){u.close();return}const c=JSON.parse(f.data);o!==null&&Array.isArray(c)?o=(0,W.applyPatch)(o,c,!0,!1,!0).newDocument:o=c;const v=this.convertGraphQLResponse(o);r(v)}),e!=null&&e.abortSignal&&(e==null||e.abortSignal.addEventListener("abort",()=>u.close()))})}async*subscribeWithFetch(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash}),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.liveQuery&&r.set("wg_live","");const i=this.addUrlParams(this.operationUrl(e.operationName),r),s=await this.fetchJson(i,{method:"GET",signal:e.abortSignal});if(!s.ok||s.body===null){yield{error:new m.ResponseError("HTTP Error",s.status)};return}const a=s.body.getReader(),l=new TextDecoder;let u="",o=null;for(;;){const{value:f,done:c}=await a.read();if(c)return;if(f&&(u+=l.decode(f),u.endsWith(`

`))){const v=JSON.parse(u.substring(0,u.length-2));o!==null&&Array.isArray(v)?o=(0,W.applyPatch)(o,v).newDocument:o=v,yield this.convertGraphQLResponse(o),u=""}}}async uploadFiles(e,r){var n;this.validateFiles(e,r);const i=new FormData;for(const[f,c]of Object.entries(e.files))c instanceof Blob&&i.append("files",c);const s={};this.csrfEnabled&&(!((n=r==null?void 0:r.requireAuthentication)!==null&&n!==void 0)||n)&&(s["X-CSRF-Token"]=await this.getCSRFToken());const a=new URLSearchParams({wg_api_hash:this.options.applicationHash});"profile"in e&&(s["X-Upload-Profile"]=e.profile),"meta"in e&&(s["X-Metadata"]=e.meta?JSON.stringify(e.meta):"");const l=await this.fetch(this.addUrlParams(`${this.options.baseURL}/s3/${e.provider}/upload`,a),{headers:s,body:i,method:"POST",signal:e.abortSignal});if(!l.ok)throw await this.handleClientResponseError(l);const u=await l.json();if(!u.length)throw new m.ResponseError("Invalid server response shape",l.status);return{fileKeys:u.map(f=>f.key)}}validateFiles(e,r){if(r!=null&&r.maxAllowedFiles&&e.files.length>r.maxAllowedFiles)throw new Error(`uploading ${e.files.length} exceeds the maximum allowed (${r.maxAllowedFiles})`);for(const n of e.files){if(r!=null&&r.maxAllowedUploadSizeBytes&&n.size>r.maxAllowedUploadSizeBytes)throw new Error(`file ${n.name} with size ${n.size} exceeds the maximum allowed (${r.maxAllowedUploadSizeBytes})`);if(r!=null&&r.allowedFileExtensions&&n.name.includes(".")){const i=n.name.substring(n.name.indexOf(".")+1).toLowerCase();if(i&&r.allowedFileExtensions.findIndex(s=>s.toLocaleLowerCase())<0)throw new Error(`file ${n.name} with extension ${i} is not allowed`)}if(r!=null&&r.allowedMimeTypes){const i=n.type;if(r.allowedMimeTypes.findIndex(a=>a==i?!0:i.match(new RegExp(a.replace("*",".*"))))<0)throw new Error(`file ${n.name} with MIME type ${i} is not allowed`)}}}login(e,r){if(typeof window>"u")throw new Error("login() can only be called in a browser environment");const n=new URLSearchParams({redirect_uri:r||window.location.toString()}),i=this.addUrlParams(`${this.options.baseURL}/auth/cookie/authorize/${e}`,n);window.location.assign(i)}async logout(e){var r;if(typeof window>"u")throw new Error("logout() can only be called in a browser environment");const n=new URLSearchParams({logout_openid_connect_provider:e!=null&&e.logoutOpenidConnectProvider?"true":"false"}),i=this.addUrlParams(`${this.options.baseURL}/auth/cookie/user/logout`,n),s=await this.fetch(i,{method:"GET"});if(!s.ok)return!1;let a=!0;if(!((r=s.headers.get("Content-Type"))===null||r===void 0)&&r.includes("application/json")){const l=await s.json();l.redirect&&(e!=null&&e.redirect?a=await e.redirect(l.redirect):window.location.href=l.redirect)}return a&&(e!=null&&e.after)&&e.after(),a}}T.Client=be;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseError=t.InputValidationError=t.GraphQLResponseError=t.Client=void 0;var e=T;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return e.Client}});var r=g;Object.defineProperty(t,"GraphQLResponseError",{enumerable:!0,get:function(){return r.GraphQLResponseError}});var n=S;Object.defineProperty(t,"InputValidationError",{enumerable:!0,get:function(){return n.InputValidationError}});var i=E;Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return i.ResponseError}})})(X);const Ne={applicationHash:"49024269",baseURL:"http://localhost:9991/",sdkVersion:""},Ue={BindRoleApis:{requiresAuthentication:!1},GetAllApis:{requiresAuthentication:!1},GetAllRoles:{requiresAuthentication:!1},GetRoleBindApis:{requiresAuthentication:!1},"Post/CreateOne":{requiresAuthentication:!0},"Post/DeleteMany":{requiresAuthentication:!1},"Post/DeleteOne":{requiresAuthentication:!1},"Post/GetList":{requiresAuthentication:!1},"Post/GetOne":{requiresAuthentication:!1},"Post/UpdateOne":{requiresAuthentication:!1},"Statistics/MonthlySales":{requiresAuthentication:!1},"Statistics/SaleTypePercent":{requiresAuthentication:!1},"Statistics/SalesTop10":{requiresAuthentication:!1},"Statistics/VisitTrending":{requiresAuthentication:!1},"System/Menu/CreateOne":{requiresAuthentication:!1},"System/Menu/DeleteMany":{requiresAuthentication:!1},"System/Menu/DeleteOne":{requiresAuthentication:!1},"System/Menu/GetList":{requiresAuthentication:!1},"System/Menu/GetMany":{requiresAuthentication:!1},"System/Menu/GetOne":{requiresAuthentication:!1},"System/Menu/UpdateOne":{requiresAuthentication:!1},"System/Operation/GetMany":{requiresAuthentication:!1},"System/Role/AddOne":{requiresAuthentication:!1},"System/Role/BindRoleApis":{requiresAuthentication:!1},"System/Role/ConnectOneMenu":{requiresAuthentication:!1},"System/Role/DeleteMany":{requiresAuthentication:!1},"System/Role/DeleteOne":{requiresAuthentication:!1},"System/Role/DisconnectOneMenu":{requiresAuthentication:!1},"System/Role/GetBindMenus":{requiresAuthentication:!1},"System/Role/GetList":{requiresAuthentication:!1},"System/Role/GetMany":{requiresAuthentication:!1},"System/Role/GetRoleBindApis":{requiresAuthentication:!1},"System/Role/UpdateOne":{requiresAuthentication:!1},"System/User/ConnectRole":{requiresAuthentication:!1},"System/User/CountUsers":{requiresAuthentication:!1},"System/User/CreateOne":{requiresAuthentication:!1},"System/User/DisconnectRole":{requiresAuthentication:!1},"System/User/GetList":{requiresAuthentication:!1},"System/User/GetOne":{requiresAuthentication:!1},"System/User/GetUserRole":{requiresAuthentication:!1},"User/Me":{requiresAuthentication:!0}};class Le extends X.Client{query(e){return super.query(e)}mutate(e){return super.mutate(e)}subscribe(e,r){return super.subscribe(e,r)}login(e,r){return super.login(e,r)}async fetchUser(e){return super.fetchUser(e)}}const Ie=t=>new Le({...Ne,...t,operationMetadata:Ue,csrfEnabled:!0}),Ce=Ie({baseURL:""});function K(t){return t!=null&&t!==""}function qe(t,e){const{pageNum:r,pageSize:n,...i}=t,s={skip:(r-1)*n,take:n||10,query:{}};if(Object.keys(i).length){if(e!=null&&e.containsFields)for(const a of e.containsFields)K(t[a])&&(s.query[a]={contains:t[a]});if(e!=null&&e.equalsFields)for(const a of e.equalsFields)K(t[a])&&(s.query[a]={equals:t[a]})}return Object.keys(s.query)||delete s.query,s}export{Ce as a,qe as c};
