import{d as B,h as r,aL as k,$ as D,k as M,r as l,M as P,o as V,c as A,f as E,a as e,w as a,aM as G,q as c,aN as N,x as _,N as K,m as Q,aO as $}from"./index-6c301b4d.js";import{a as R,c as I}from"./index-5a5916ae.js";import{_ as O}from"./role.bind.vue_vue_type_script_setup_true_lang-3db191b4.js";const T={class:"app-container"},j={class:"search"},Y=B({name:"UserManage",__name:"index",setup(H){const f=r(k),d=r(!1),v=r(0),m=r(!1),g=r(),n=D({pageNum:1,pageSize:10,name:""}),h=r([]);async function s(){d.value=!0;const{error:u,data:o}=await R.query({operationName:"System/User/GetList",input:I(n,{containsFields:["name"]})});u||(h.value=o.data,v.value=o.data.length),d.value=!1}function x(){f.value.resetFields(),n.pageNum=1,s()}function U(u){m.value=!0,g.value=u}return M(()=>{s()}),(u,o)=>{const C=l("el-input"),y=l("el-form-item"),p=l("el-button"),w=l("Auth"),i=l("el-table-column"),L=l("el-image"),S=l("el-table"),q=l("el-card"),z=P("loading");return V(),A("div",T,[E("div",j,[e(c(k),{ref_key:"queryFormRef",ref:f,model:n,inline:!0},{default:a(()=>[e(y,{label:"名称",prop:"name"},{default:a(()=>[e(C,{modelValue:n.name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.name=t),placeholder:"用户名",clearable:"",style:{width:"200px"},onKeyup:G(s,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(y,null,{default:a(()=>[e(w,{value:"/System/User/GetList"},{default:a(()=>[e(p,{type:"primary",onClick:s},{default:a(()=>[e(c(N),{icon:"ep:search"}),_("搜索 ")]),_:1})]),_:1}),e(w,{value:"/System/User/GetList"},{default:a(()=>[e(p,{onClick:x},{default:a(()=>[e(c(N),{icon:"ep:refresh"}),_(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),e(q,{shadow:"never"},{default:a(()=>[K((V(),Q(S,{data:h.value,"highlight-current-row":"",border:""},{default:a(()=>[e(i,{key:"id",label:"编号",align:"center",prop:"id",width:"100"}),e(i,{key:"name",label:"用户名",align:"center",prop:"name",width:"200"}),e(i,{label:"头像",width:"80",align:"center",prop:"avatar"},{default:a(t=>[e(L,{src:t.row.avatar,"preview-src-list":[t.row.avatar]},null,8,["src","preview-src-list"])]),_:1}),e(i,{label:"创建时间",align:"center",prop:"createdAt",width:"180",formatter:(t,F,b)=>b?new Date(b).toLocaleDateString():""},null,8,["formatter"]),e(i,{label:"操作",fixed:"right","min-width":"220"},{default:a(t=>[e(p,{type:"primary",size:"small",link:"",onClick:F=>U(t.row)},{default:a(()=>[_("绑定角色")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,d.value]]),e(c($),{total:v.value,"page-count":n.pageNum,"page-size":n.pageSize,onPagination:s},null,8,["total","page-count","page-size"])]),_:1}),e(O,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=t=>m.value=t),user:g.value},null,8,["modelValue","user"])])}}});export{Y as default};
