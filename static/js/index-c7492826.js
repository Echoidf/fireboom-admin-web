import{d as te,aQ as ae,h as c,ah as re,k as oe,r as n,o as D,c as U,a as t,w as o,f as H,N as J,P as Y,F as ne,l as _e,aR as e,_ as ue,aL as Z,$ as y,M as me,q as R,aN as w,x as v,m as W,W as k,y as ee,t as pe,ax as C,aP as de,aS as ce,aT as ve}from"./index-6bf1b6e8.js";import{a as $}from"./index-5c7c0b77.js";import{m as ge}from"./index-adf42357.js";const Ee={class:"icon-list"},fe=["onClick"],Ve=te({__name:"index",props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(K,{emit:P}){const m=ae(K,"modelValue"),r=c(!1),p=[],V=c(""),b=c([]),h=c(null);function l(){const g=Object.assign({"../../assets/icons/advert.svg":()=>e(()=>import("./advert-2a801f88.js"),["./advert-2a801f88.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/api.svg":()=>e(()=>import("./api-796447f9.js"),["./api-796447f9.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/brand.svg":()=>e(()=>import("./brand-60ece70e.js"),["./brand-60ece70e.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/bug.svg":()=>e(()=>import("./bug-ddf74c9f.js"),["./bug-ddf74c9f.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/cascader.svg":()=>e(()=>import("./cascader-5489141a.js"),["./cascader-5489141a.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/chart.svg":()=>e(()=>import("./chart-91ea5520.js"),["./chart-91ea5520.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/client.svg":()=>e(()=>import("./client-198e75f0.js"),["./client-198e75f0.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close.svg":()=>e(()=>import("./close-c84661b0.js"),["./close-c84661b0.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_all.svg":()=>e(()=>import("./close_all-9f201b1b.js"),["./close_all-9f201b1b.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_left.svg":()=>e(()=>import("./close_left-236f1dea.js"),["./close_left-236f1dea.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_other.svg":()=>e(()=>import("./close_other-7c8783ac.js"),["./close_other-7c8783ac.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_right.svg":()=>e(()=>import("./close_right-70fdcb49.js"),["./close_right-70fdcb49.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/coupon.svg":()=>e(()=>import("./coupon-67012b59.js"),["./coupon-67012b59.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dashboard.svg":()=>e(()=>import("./dashboard-fa006c13.js"),["./dashboard-fa006c13.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dict.svg":()=>e(()=>import("./dict-ffd63a0e.js"),["./dict-ffd63a0e.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dict_item.svg":()=>e(()=>import("./dict_item-93cb11f9.js"),["./dict_item-93cb11f9.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/document.svg":()=>e(()=>import("./document-b10669b5.js"),["./document-b10669b5.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/download.svg":()=>e(()=>import("./download-30e12994.js"),["./download-30e12994.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/drag.svg":()=>e(()=>import("./drag-0cd6ec77.js"),["./drag-0cd6ec77.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/edit.svg":()=>e(()=>import("./edit-8d17082d.js"),["./edit-8d17082d.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-642c5bfe.js"),["./exit-fullscreen-642c5bfe.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/eye-open.svg":()=>e(()=>import("./eye-open-1e98b0db.js"),["./eye-open-1e98b0db.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/eye.svg":()=>e(()=>import("./eye-faeea586.js"),["./eye-faeea586.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-54aed2fc.js"),["./fullscreen-54aed2fc.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/github.svg":()=>e(()=>import("./github-6008922c.js"),["./github-6008922c.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/goods-list.svg":()=>e(()=>import("./goods-list-d8bfd115.js"),["./goods-list-d8bfd115.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/goods.svg":()=>e(()=>import("./goods-4bca67e6.js"),["./goods-4bca67e6.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/guide.svg":()=>e(()=>import("./guide-3f1857fe.js"),["./guide-3f1857fe.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/homepage.svg":()=>e(()=>import("./homepage-4313899d.js"),["./homepage-4313899d.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/lab.svg":()=>e(()=>import("./lab-dc3d9509.js"),["./lab-dc3d9509.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/language.svg":()=>e(()=>import("./language-8ca843fa.js"),["./language-8ca843fa.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/link.svg":()=>e(()=>import("./link-b939887d.js"),["./link-b939887d.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/menu.svg":()=>e(()=>import("./menu-a4bc4295.js"),["./menu-a4bc4295.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/message.svg":()=>e(()=>import("./message-6ee44f7a.js"),["./message-6ee44f7a.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/money.svg":()=>e(()=>import("./money-e6ed7b6e.js"),["./money-e6ed7b6e.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/monitor.svg":()=>e(()=>import("./monitor-35e54269.js"),["./monitor-35e54269.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/multi_level.svg":()=>e(()=>import("./multi_level-d8dfef62.js"),["./multi_level-d8dfef62.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/nested.svg":()=>e(()=>import("./nested-60d9f4a1.js"),["./nested-60d9f4a1.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/number.svg":()=>e(()=>import("./number-d6cd9564.js"),["./number-d6cd9564.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/order.svg":()=>e(()=>import("./order-6bc37b83.js"),["./order-6bc37b83.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/password.svg":()=>e(()=>import("./password-b4d3bcc7.js"),["./password-b4d3bcc7.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/peoples.svg":()=>e(()=>import("./peoples-27875161.js"),["./peoples-27875161.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/perm.svg":()=>e(()=>import("./perm-2ac009ab.js"),["./perm-2ac009ab.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/publish.svg":()=>e(()=>import("./publish-d99c25a4.js"),["./publish-d99c25a4.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-14ddb91a.js"),["./rabbitmq-14ddb91a.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/rate.svg":()=>e(()=>import("./rate-ae9baa00.js"),["./rate-ae9baa00.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/redis.svg":()=>e(()=>import("./redis-753f1d04.js"),["./redis-753f1d04.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/refresh.svg":()=>e(()=>import("./refresh-bf7dde94.js"),["./refresh-bf7dde94.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/role.svg":()=>e(()=>import("./role-b7f41c97.js"),["./role-b7f41c97.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/security.svg":()=>e(()=>import("./security-462e278c.js"),["./security-462e278c.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/shopping.svg":()=>e(()=>import("./shopping-d6999fc6.js"),["./shopping-d6999fc6.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/size.svg":()=>e(()=>import("./size-11c98d82.js"),["./size-11c98d82.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/skill.svg":()=>e(()=>import("./skill-14eb0ce7.js"),["./skill-14eb0ce7.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/system.svg":()=>e(()=>import("./system-c5a8427b.js"),["./system-c5a8427b.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/theme.svg":()=>e(()=>import("./theme-656dd4a5.js"),["./theme-656dd4a5.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/tree.svg":()=>e(()=>import("./tree-6e74063a.js"),["./tree-6e74063a.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/user.svg":()=>e(()=>import("./user-2c29aeef.js"),["./user-2c29aeef.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/uv.svg":()=>e(()=>import("./uv-d8727eff.js"),["./uv-d8727eff.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/valid_code.svg":()=>e(()=>import("./valid_code-94157541.js"),["./valid_code-94157541.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/verify_code.svg":()=>e(()=>import("./verify_code-d61ed095.js"),["./verify_code-d61ed095.js","./index-6bf1b6e8.js","../css/index-67916441.css"],import.meta.url)});for(const _ in g){const I=_.split("assets/icons/")[1].split(".svg")[0];p.push(I)}b.value=p}function A(){V.value?b.value=p.filter(g=>g.includes(V.value)):b.value=p}function N(g){P("update:modelValue",g),r.value=!1}return re(h,()=>r.value=!1),oe(()=>{l()}),(g,_)=>{const I=n("svg-icon"),L=n("el-input"),x=n("Icon"),B=n("el-divider"),O=n("el-tooltip"),F=n("el-scrollbar"),q=n("el-popover");return D(),U("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:h},[t(L,{modelValue:m.value,"onUpdate:modelValue":_[0]||(_[0]=d=>m.value=d),readonly:"",onClick:_[1]||(_[1]=d=>r.value=!r.value),placeholder:"点击选择图标"},{prepend:o(()=>[t(I,{"icon-class":m.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(q,{shadow:"none",visible:r.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:o(()=>[H("div",{onClick:_[2]||(_[2]=d=>r.value=!r.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[J(t(x,{icon:"ep:caret-top"},null,512),[[Y,r.value]]),J(t(x,{icon:"ep:caret-bottom"},null,512),[[Y,!r.value]])])]),default:o(()=>[t(L,{class:"p-2",modelValue:V.value,"onUpdate:modelValue":_[3]||(_[3]=d=>V.value=d),placeholder:"搜索图标",clearable:"",onInput:A},null,8,["modelValue"]),t(B,{"border-style":"dashed"}),t(F,{height:"300px"},{default:o(()=>[H("ul",Ee,[(D(!0),U(ne,null,_e(b.value,(d,z)=>(D(),U("li",{class:"icon-item",key:z,onClick:G=>N(d)},[t(O,{content:d,placement:"bottom",effect:"light"},{default:o(()=>[t(I,{color:"var(--el-text-color-regular)","icon-class":d},null,8,["icon-class"])]),_:2},1032,["content"])],8,fe))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const be=ue(Ve,[["__scopeId","data-v-35189a2f"]]),De={class:"app-container"},Pe={class:"dialog-footer"},Ie={name:"cmenu"},he=te({...Ie,name:"MenuManage",setup(K){const P=c(Z),T=c(!1),m=y({visible:!1}),r=y({visible:!1}),p=y({visible:!1}),V=c([]),b=c([]),h=c([]),l=y({label:"",level:1,path:"",icon:"",sort:1}),A=c(),N=y({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}),g=c();async function _(){T.value=!0;const{error:a,data:s}=await $.query({operationName:"System/Menu/GetMany"});a||(V.value=s.data),T.value=!1}function I(a){g.value=a.id}function L(a){m.visible=!0,a?(m.title="编辑菜单",A.value=a.id,ge(l,a)):m.title="新增菜单"}function x(){P.value.validate(async a=>{if(a){if(A.value){const{error:s}=await $.mutate({operationName:"System/Menu/UpdateOne",input:{id:A.value,...l}});s||(C.success("修改成功"),O(),_())}else{const{error:s}=await $.mutate({operationName:"System/Menu/CreateOne",input:{...l}});s||(C.success("新增成功"),O(),_())}T.value=!1}})}function B(a){if(!a)return C.warning("请勾选删除项"),!1;de.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:s}=await $.mutate({operationName:"System/Menu/DeleteOne",input:{id:a}});s||(C.success("删除成功"),_())}).catch(()=>C.info("已取消删除"))}function O(){m.visible=!1,d()}function F(){r.visible=!1}function q(){p.visible=!1}function d(){P.value.resetFields(),P.value.clearValidate(),l.icon="",l.label="",l.level=1,l.path="",l.sort=1}oe(()=>{_()});function z(a){r.title="子菜单",ce(a).then(s=>{r.visible=!0,b.value=s.data.data})}function G(a){p.title="子权限",ve(a).then(s=>{p.visible=!0,h.value=s.data.data})}return(a,s)=>{const E=n("el-button"),f=n("Auth"),u=n("el-table-column"),Q=n("el-table"),se=n("el-card"),X=n("el-input"),S=n("el-form-item"),ie=n("el-input-number"),j=n("el-dialog"),le=me("loading");return D(),U("div",De,[t(se,{shadow:"never"},{header:o(()=>[t(f,{value:"/System/Menu/CreateOne"},{default:o(()=>[t(E,{type:"success",onClick:s[0]||(s[0]=i=>L())},{icon:o(()=>[t(R(w),{icon:"ep:plus"})]),default:o(()=>[v(" 新增")]),_:1})]),_:1})]),default:o(()=>[J((D(),W(Q,{data:V.value,"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:I,"row-key":"id","default-expand-all":"",border:""},{default:o(()=>[t(u,{label:"菜单名称",width:"200",prop:"label"}),t(u,{label:"菜单路径",align:"center",width:"150",prop:"path"}),t(u,{label:"排序",align:"center",width:"100",prop:"sort"}),t(u,{fixed:"right",align:"center",label:"操作","min-width":"220"},{default:o(i=>[t(f,{value:"/System/Menu/"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:k(M=>L(i.row),["stop"])},{default:o(()=>[t(R(w),{icon:"ep:edit"}),v("编辑 ")]),_:2},1032,["onClick"])]),_:2},1024),t(f,{value:"/System/Menu/DeleteOne"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:k(M=>B(i.row.id),["stop"])},{default:o(()=>[t(R(w),{icon:"ep:delete"}),v("删除 ")]),_:2},1032,["onClick"])]),_:2},1024),t(f,{value:"/System/Menu/GetChildrenMenus"},{default:o(()=>[i.row.is_bottom?ee("",!0):(D(),W(E,{key:0,type:"primary",link:"",size:"small",onClick:k(M=>z(i.row.id),["stop"])},{default:o(()=>[t(R(w),{icon:"ep:edit"}),v("子菜单 ")]),_:2},1032,["onClick"]))]),_:2},1024),t(f,{value:"/System/Menu/GetMenuPerms"},{default:o(()=>[i.row.is_bottom?(D(),W(E,{key:0,type:"primary",link:"",size:"small",onClick:k(M=>G(i.row.id),["stop"])},{default:o(()=>[t(R(w),{icon:"ep:edit"}),v("子权限 ")]),_:2},1032,["onClick"])):ee("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[le,T.value]])]),_:1}),t(j,{title:m.title,modelValue:m.visible,"onUpdate:modelValue":s[5]||(s[5]=i=>m.visible=i),onClose:O,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:o(()=>[H("div",Pe,[t(f,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{type:"primary",onClick:x},{default:o(()=>[v("确 定")]),_:1})]),_:1}),t(f,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{onClick:O},{default:o(()=>[v("取 消")]),_:1})]),_:1})])]),default:o(()=>[t(R(Z),{ref_key:"menuFormRef",ref:P,model:l,rules:N,"label-width":"100px"},{default:o(()=>[t(S,{label:"菜单名称",prop:"label"},{default:o(()=>[t(X,{modelValue:l.label,"onUpdate:modelValue":s[1]||(s[1]=i=>l.label=i),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(S,{label:"路由路径",prop:"path"},{default:o(()=>[t(X,{modelValue:l.path,"onUpdate:modelValue":s[2]||(s[2]=i=>l.path=i),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(S,{label:"图标",prop:"icon"},{default:o(()=>[t(be,{modelValue:l.icon,"onUpdate:modelValue":s[3]||(s[3]=i=>l.icon=i)},null,8,["modelValue"])]),_:1}),t(S,{label:"排序",prop:"sort"},{default:o(()=>[t(ie,{modelValue:l.sort,"onUpdate:modelValue":s[4]||(s[4]=i=>l.sort=i),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(j,{title:r.title,modelValue:r.visible,"onUpdate:modelValue":s[6]||(s[6]=i=>r.visible=i),onClose:F,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(Q,{data:b.value,style:{width:"100%"}},{default:o(()=>[t(u,{label:"菜单名称",width:"180",prop:"label"}),t(u,{label:"菜单路径",width:"200",prop:"path"}),t(u,{label:"排序",align:"center",width:"160",prop:"sort"}),t(u,{fixed:"right",align:"center",label:"操作"},{default:o(i=>[t(f,{value:"System/Menu/GetMenuPerms"}),t(E,{type:"primary",link:"",size:"small",onClick:k(M=>G(i.row.id),["stop"])},{default:o(()=>[v(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),v("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(j,{title:p.title,modelValue:p.visible,"onUpdate:modelValue":s[7]||(s[7]=i=>p.visible=i),onClose:q,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(Q,{data:h.value,style:{width:"100%"}},{default:o(()=>[t(u,{label:"创建时间",width:"200",prop:"createdAt"}),t(u,{label:"是否启用",align:"center",width:"180"},{default:o(i=>[v(pe(i===0?"否":"是"),1)]),_:1}),t(u,{label:"方法",align:"center",width:"100",prop:"method"}),t(u,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{he as default};
