import{d as J,y as ne,b,g as S,f as z,A as _e,_ as oe,aE as ue,r as p,ai as ce,o as ie,a as _,i as t,w as s,m as H,Q as Z,F as me,h as de,aF as e,a0 as w,k as pe,ax as ee,l as R,az as k,e as v,c as X,X as x,D as te,t as ve,aB as C,aD as ge}from"./index-986fbe68.js";import{a as U}from"./index-547e77c2.js";import{m as fe}from"./index-adf42357.js";import{g as Ee,a as Ve}from"./system-b2f749d2.js";const be=["xlink:href","fill"],Ie={name:"SvgIcon"},De=J({...Ie,props:{prefix:{type:String,default:"icon"},iconClass:{type:String,required:!1},color:{type:String},size:{type:String,default:"1em"}},setup(I){const g=I,D=ne(()=>`#${g.prefix}-${g.iconClass}`);return(u,r)=>(b(),S("svg",{"aria-hidden":"true",class:"svg-icon",style:_e("width:"+I.size+";height:"+I.size)},[z("use",{"xlink:href":D.value,fill:I.color},null,8,be)],4))}});const se=oe(De,[["__scopeId","data-v-91dcf4d8"]]),he={class:"icon-list"},ye=["onClick"],Oe={name:"IconSelect"},Pe=J({...Oe,props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(I,{emit:g}){const u=ue(I,"modelValue"),r=p(!1),m=[],h=p(""),y=p([]),T=p(null);function l(){const f=Object.assign({"/src/assets/icons/advert.svg":()=>e(()=>import("./advert-5eb7f204.js"),["./advert-5eb7f204.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/api.svg":()=>e(()=>import("./api-4c2472b9.js"),["./api-4c2472b9.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/brand.svg":()=>e(()=>import("./brand-a56d975d.js"),["./brand-a56d975d.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/bug.svg":()=>e(()=>import("./bug-0940cc42.js"),["./bug-0940cc42.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/cascader.svg":()=>e(()=>import("./cascader-afbfd87e.js"),["./cascader-afbfd87e.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/chart.svg":()=>e(()=>import("./chart-2886c7e5.js"),["./chart-2886c7e5.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/client.svg":()=>e(()=>import("./client-fcf0f675.js"),["./client-fcf0f675.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/close.svg":()=>e(()=>import("./close-06ece0df.js"),["./close-06ece0df.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/close_all.svg":()=>e(()=>import("./close_all-2f6ef718.js"),["./close_all-2f6ef718.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/close_left.svg":()=>e(()=>import("./close_left-a2960552.js"),["./close_left-a2960552.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/close_other.svg":()=>e(()=>import("./close_other-5a0beb38.js"),["./close_other-5a0beb38.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/close_right.svg":()=>e(()=>import("./close_right-d7426f08.js"),["./close_right-d7426f08.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/coupon.svg":()=>e(()=>import("./coupon-761ed433.js"),["./coupon-761ed433.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/dashboard.svg":()=>e(()=>import("./dashboard-8aa81910.js"),["./dashboard-8aa81910.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/dict.svg":()=>e(()=>import("./dict-2531f22c.js"),["./dict-2531f22c.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/dict_item.svg":()=>e(()=>import("./dict_item-f5a79162.js"),["./dict_item-f5a79162.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/document.svg":()=>e(()=>import("./document-516f2107.js"),["./document-516f2107.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/download.svg":()=>e(()=>import("./download-cc3d7fd0.js"),["./download-cc3d7fd0.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/drag.svg":()=>e(()=>import("./drag-ea0dcd72.js"),["./drag-ea0dcd72.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/edit.svg":()=>e(()=>import("./edit-b4008253.js"),["./edit-b4008253.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-43c77611.js"),["./exit-fullscreen-43c77611.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/eye-open.svg":()=>e(()=>import("./eye-open-606ea078.js"),["./eye-open-606ea078.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/eye.svg":()=>e(()=>import("./eye-78d7912e.js"),["./eye-78d7912e.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-145ee916.js"),["./fullscreen-145ee916.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/github.svg":()=>e(()=>import("./github-6be40488.js"),["./github-6be40488.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/goods-list.svg":()=>e(()=>import("./goods-list-1476555b.js"),["./goods-list-1476555b.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/goods.svg":()=>e(()=>import("./goods-01bb5295.js"),["./goods-01bb5295.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/guide.svg":()=>e(()=>import("./guide-3e85e3fc.js"),["./guide-3e85e3fc.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/homepage.svg":()=>e(()=>import("./homepage-187e75cb.js"),["./homepage-187e75cb.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/lab.svg":()=>e(()=>import("./lab-4d4f4574.js"),["./lab-4d4f4574.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/language.svg":()=>e(()=>import("./language-0e209464.js"),["./language-0e209464.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/link.svg":()=>e(()=>import("./link-39595238.js"),["./link-39595238.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/menu.svg":()=>e(()=>import("./menu-67f6dd15.js"),["./menu-67f6dd15.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/message.svg":()=>e(()=>import("./message-7d64b75f.js"),["./message-7d64b75f.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/money.svg":()=>e(()=>import("./money-c71d0b18.js"),["./money-c71d0b18.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/monitor.svg":()=>e(()=>import("./monitor-b75feea5.js"),["./monitor-b75feea5.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/multi_level.svg":()=>e(()=>import("./multi_level-5858a4e7.js"),["./multi_level-5858a4e7.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/nested.svg":()=>e(()=>import("./nested-5eb67400.js"),["./nested-5eb67400.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/number.svg":()=>e(()=>import("./number-47cc3f5e.js"),["./number-47cc3f5e.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/order.svg":()=>e(()=>import("./order-21f8cad8.js"),["./order-21f8cad8.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/password.svg":()=>e(()=>import("./password-b6ddc04b.js"),["./password-b6ddc04b.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/peoples.svg":()=>e(()=>import("./peoples-54830664.js"),["./peoples-54830664.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/perm.svg":()=>e(()=>import("./perm-ce979ede.js"),["./perm-ce979ede.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/publish.svg":()=>e(()=>import("./publish-a81d5e56.js"),["./publish-a81d5e56.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-dda6c759.js"),["./rabbitmq-dda6c759.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/rate.svg":()=>e(()=>import("./rate-9212447c.js"),["./rate-9212447c.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/redis.svg":()=>e(()=>import("./redis-1ceb2295.js"),["./redis-1ceb2295.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/refresh.svg":()=>e(()=>import("./refresh-a48c70da.js"),["./refresh-a48c70da.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/role.svg":()=>e(()=>import("./role-62fd0b14.js"),["./role-62fd0b14.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/security.svg":()=>e(()=>import("./security-a4cbbc0d.js"),["./security-a4cbbc0d.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/shopping.svg":()=>e(()=>import("./shopping-5e640c0c.js"),["./shopping-5e640c0c.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/size.svg":()=>e(()=>import("./size-90e36c17.js"),["./size-90e36c17.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/skill.svg":()=>e(()=>import("./skill-3bfd1184.js"),["./skill-3bfd1184.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/system.svg":()=>e(()=>import("./system-4986e934.js"),["./system-4986e934.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/theme.svg":()=>e(()=>import("./theme-14830902.js"),["./theme-14830902.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/tree.svg":()=>e(()=>import("./tree-8eae5eac.js"),["./tree-8eae5eac.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/user.svg":()=>e(()=>import("./user-c64e9013.js"),["./user-c64e9013.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/uv.svg":()=>e(()=>import("./uv-48ad6f2d.js"),["./uv-48ad6f2d.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/valid_code.svg":()=>e(()=>import("./valid_code-65c876fe.js"),["./valid_code-65c876fe.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url),"/src/assets/icons/verify_code.svg":()=>e(()=>import("./verify_code-decf06e0.js"),["./verify_code-decf06e0.js","./index-986fbe68.js","../css/index-67916441.css"],import.meta.url)});for(const n in f){const O=n.split("assets/icons/")[1].split(".svg")[0];m.push(O)}y.value=m}function A(){h.value?y.value=m.filter(f=>f.includes(h.value)):y.value=m}function B(f){g("update:modelValue",f),r.value=!1}return ce(T,()=>r.value=!1),ie(()=>{l()}),(f,n)=>{const O=_("el-input"),L=_("Icon"),F=_("el-divider"),N=_("el-tooltip"),P=_("el-scrollbar"),q=_("el-popover");return b(),S("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:T},[t(O,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=d=>u.value=d),readonly:"",onClick:n[1]||(n[1]=d=>r.value=!r.value),placeholder:"点击选择图标"},{prepend:s(()=>[t(se,{"icon-class":u.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(q,{shadow:"none",visible:r.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:s(()=>[z("div",{onClick:n[2]||(n[2]=d=>r.value=!r.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[H(t(L,{icon:"ep:caret-top"},null,512),[[Z,r.value]]),H(t(L,{icon:"ep:caret-bottom"},null,512),[[Z,!r.value]])])]),default:s(()=>[t(O,{class:"p-2",modelValue:h.value,"onUpdate:modelValue":n[3]||(n[3]=d=>h.value=d),placeholder:"搜索图标",clearable:"",onInput:A},null,8,["modelValue"]),t(F,{"border-style":"dashed"}),t(P,{height:"300px"},{default:s(()=>[z("ul",he,[(b(!0),S(me,null,de(y.value,(d,G)=>(b(),S("li",{class:"icon-item",key:G,onClick:K=>B(d)},[t(N,{content:d,placement:"bottom",effect:"light"},{default:s(()=>[t(se,{color:"var(--el-text-color-regular)","icon-class":d},null,8,["icon-class"])]),_:2},1032,["content"])],8,ye))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const Re=oe(Pe,[["__scopeId","data-v-8f707460"]]),Te={class:"app-container"},Ae={class:"dialog-footer"},Ce=J({name:"MenuManage",__name:"index",setup(I){const g=p(ee),D=p(!1),u=w({visible:!1}),r=w({visible:!1}),m=w({visible:!1}),h=p([]),y=p([]),T=p([]),l=w({label:"",level:1,path:"",icon:"",sort:1}),A=p(),B=w({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}),f=p();async function n(){D.value=!0;const{error:a,data:o}=await U.query({operationName:"System/Menu/GetMany"});a||(h.value=o.data),D.value=!1}function O(a){f.value=a.id}function L(a){u.visible=!0,a?(u.title="编辑菜单",A.value=a.id,fe(l,a)):u.title="新增菜单"}function F(){g.value.validate(async a=>{if(a){if(A.value){const{error:o}=await U.mutate({operationName:"System/Menu/UpdateOne",input:{id:A.value,...l}});o||(C.success("修改成功"),P(),n())}else{const{error:o}=await U.mutate({operationName:"System/Menu/CreateOne",input:{...l}});o||(C.success("新增成功"),P(),n())}D.value=!1}})}function N(a){if(!a)return C.warning("请勾选删除项"),!1;ge.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:o}=await U.mutate({operationName:"System/Menu/DeleteOne",input:{id:a}});o||(C.success("删除成功"),n())}).catch(()=>C.info("已取消删除"))}function P(){u.visible=!1,G()}function q(){r.visible=!1}function d(){m.visible=!1}function G(){g.value.resetFields(),g.value.clearValidate(),l.icon="",l.label="",l.level=1,l.path="",l.sort=1}ie(()=>{n()});function K(a){r.title="子菜单",Ee(a).then(o=>{r.visible=!0,y.value=o.data.data.data})}function W(a){m.title="子权限",Ve(a).then(o=>{m.visible=!0,T.value=o.data.data.data})}return(a,o)=>{const E=_("el-button"),V=_("Auth"),c=_("el-table-column"),Q=_("el-table"),le=_("el-card"),Y=_("el-input"),M=_("el-form-item"),re=_("el-input-number"),j=_("el-dialog"),ae=pe("loading");return b(),S("div",Te,[t(le,{shadow:"never"},{header:s(()=>[t(V,{value:"/System/Menu/CreateOne"},{default:s(()=>[t(E,{type:"success",onClick:o[0]||(o[0]=i=>L())},{icon:s(()=>[t(R(k),{icon:"ep:plus"})]),default:s(()=>[v(" 新增")]),_:1})]),_:1})]),default:s(()=>[H((b(),X(Q,{data:h.value,"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:O,"row-key":"id","default-expand-all":"",border:""},{default:s(()=>[t(c,{label:"菜单名称",width:"200",prop:"label"}),t(c,{label:"菜单路径",align:"center",width:"150",prop:"path"}),t(c,{label:"排序",align:"center",width:"100",prop:"sort"}),t(c,{fixed:"right",align:"center",label:"操作","min-width":"220"},{default:s(i=>[t(V,{value:"/System/Menu/UpdateOne"},{default:s(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>L(i.row),["stop"])},{default:s(()=>[t(R(k),{icon:"ep:edit"}),v("编辑 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/DeleteOne"},{default:s(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>N(i.row.id),["stop"])},{default:s(()=>[t(R(k),{icon:"ep:delete"}),v("删除 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/GetChildrenMenus"},{default:s(()=>[i.row.is_bottom?te("",!0):(b(),X(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>K(i.row.id),["stop"])},{default:s(()=>[t(R(k),{icon:"ep:edit"}),v("子菜单 ")]),_:2},1032,["onClick"]))]),_:2},1024),t(V,{value:"/System/Menu/GetMenuPerms"},{default:s(()=>[i.row.is_bottom?(b(),X(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>W(i.row.id),["stop"])},{default:s(()=>[t(R(k),{icon:"ep:edit"}),v("子权限 ")]),_:2},1032,["onClick"])):te("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ae,D.value]])]),_:1}),t(j,{title:u.title,modelValue:u.visible,"onUpdate:modelValue":o[5]||(o[5]=i=>u.visible=i),onClose:P,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:s(()=>[z("div",Ae,[t(V,{value:"/System/Menu/UpdateOne"},{default:s(()=>[t(E,{type:"primary",onClick:F},{default:s(()=>[v("确 定")]),_:1})]),_:1}),t(V,{value:"/System/Menu/UpdateOne"},{default:s(()=>[t(E,{onClick:P},{default:s(()=>[v("取 消")]),_:1})]),_:1})])]),default:s(()=>[t(R(ee),{ref_key:"menuFormRef",ref:g,model:l,rules:B,"label-width":"100px"},{default:s(()=>[t(M,{label:"菜单名称",prop:"label"},{default:s(()=>[t(Y,{modelValue:l.label,"onUpdate:modelValue":o[1]||(o[1]=i=>l.label=i),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(M,{label:"路由路径",prop:"path"},{default:s(()=>[t(Y,{modelValue:l.path,"onUpdate:modelValue":o[2]||(o[2]=i=>l.path=i),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(M,{label:"图标",prop:"icon"},{default:s(()=>[t(Re,{modelValue:l.icon,"onUpdate:modelValue":o[3]||(o[3]=i=>l.icon=i)},null,8,["modelValue"])]),_:1}),t(M,{label:"排序",prop:"sort"},{default:s(()=>[t(re,{modelValue:l.sort,"onUpdate:modelValue":o[4]||(o[4]=i=>l.sort=i),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(j,{title:r.title,modelValue:r.visible,"onUpdate:modelValue":o[6]||(o[6]=i=>r.visible=i),onClose:q,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:s(()=>[t(Q,{data:y.value,style:{width:"100%"}},{default:s(()=>[t(c,{label:"菜单名称",width:"180",prop:"label"}),t(c,{label:"菜单路径",width:"200",prop:"path"}),t(c,{label:"排序",align:"center",width:"160",prop:"sort"}),t(c,{fixed:"right",align:"center",label:"操作"},{default:s(i=>[t(V,{value:"System/Menu/GetMenuPerms"}),t(E,{type:"primary",link:"",size:"small",onClick:x($=>W(i.row.id),["stop"])},{default:s(()=>[v(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),v("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(j,{title:m.title,modelValue:m.visible,"onUpdate:modelValue":o[7]||(o[7]=i=>m.visible=i),onClose:d,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:s(()=>[t(Q,{data:T.value,style:{width:"100%"}},{default:s(()=>[t(c,{label:"创建时间",width:"200",prop:"createdAt"}),t(c,{label:"是否启用",align:"center",width:"180"},{default:s(i=>[v(ve(i===0?"否":"是"),1)]),_:1}),t(c,{label:"方法",align:"center",width:"100",prop:"method"}),t(c,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{Ce as default};
