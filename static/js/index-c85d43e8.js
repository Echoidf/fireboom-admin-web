import{d as J,o as b,c as S,f as N,q as O,n as ne,_ as se,aQ as _e,h as c,ah as ue,k as ie,r as _,a as t,w as o,N as H,P as Z,F as me,l as de,aR as e,aL as ee,$ as w,M as pe,aN as k,x as v,m as W,W as x,y as te,t as ce,ax as C,aP as ve,aS as ge,aT as fe}from"./index-863de930.js";import{a as U}from"./index-c7188e1f.js";import{m as Ee}from"./index-adf42357.js";const Ve=["xlink:href","fill"],be=J({__name:"index",props:{prefix:{type:String,default:"icon"},iconClass:{type:String,required:!1},color:{type:String},size:{type:String,default:"1em"}},setup(h){const g=h,I=computed(()=>`#${g.prefix}-${g.iconClass}`);return(u,a)=>(b(),S("svg",{"aria-hidden":"true",class:"svg-icon",style:ne("width:"+h.size+";height:"+h.size)},[N("use",{"xlink:href":O(I),fill:h.color},null,8,Ve)],4))}});const oe=se(be,[["__scopeId","data-v-5062ba9e"]]),he={class:"icon-list"},Ie=["onClick"],De={name:"IconSelect"},ye=J({...De,props:{modelValue:{type:String,require:!1}},emits:["update:modelValue"],setup(h,{emit:g}){const u=_e(h,"modelValue"),a=c(!1),d=[],D=c(""),y=c([]),T=c(null);function l(){const f=Object.assign({"../../assets/icons/advert.svg":()=>e(()=>import("./advert-b5c7a671.js"),["./advert-b5c7a671.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/api.svg":()=>e(()=>import("./api-0ee3767d.js"),["./api-0ee3767d.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/brand.svg":()=>e(()=>import("./brand-14c1ccdf.js"),["./brand-14c1ccdf.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/bug.svg":()=>e(()=>import("./bug-ca1d8fde.js"),["./bug-ca1d8fde.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/cascader.svg":()=>e(()=>import("./cascader-819da859.js"),["./cascader-819da859.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/chart.svg":()=>e(()=>import("./chart-673b3e25.js"),["./chart-673b3e25.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/client.svg":()=>e(()=>import("./client-1a12a0d7.js"),["./client-1a12a0d7.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close.svg":()=>e(()=>import("./close-fe03ed03.js"),["./close-fe03ed03.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_all.svg":()=>e(()=>import("./close_all-9626eb77.js"),["./close_all-9626eb77.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_left.svg":()=>e(()=>import("./close_left-5c1a7d4d.js"),["./close_left-5c1a7d4d.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_other.svg":()=>e(()=>import("./close_other-156ce051.js"),["./close_other-156ce051.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/close_right.svg":()=>e(()=>import("./close_right-5e40a3a5.js"),["./close_right-5e40a3a5.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/coupon.svg":()=>e(()=>import("./coupon-ffe818b5.js"),["./coupon-ffe818b5.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dashboard.svg":()=>e(()=>import("./dashboard-088e2408.js"),["./dashboard-088e2408.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dict.svg":()=>e(()=>import("./dict-189e3762.js"),["./dict-189e3762.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/dict_item.svg":()=>e(()=>import("./dict_item-5e1d9d6b.js"),["./dict_item-5e1d9d6b.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/document.svg":()=>e(()=>import("./document-fa77e13c.js"),["./document-fa77e13c.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/download.svg":()=>e(()=>import("./download-587e8a41.js"),["./download-587e8a41.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/drag.svg":()=>e(()=>import("./drag-2ae62f8e.js"),["./drag-2ae62f8e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/edit.svg":()=>e(()=>import("./edit-f58bf78d.js"),["./edit-f58bf78d.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-9dffb17a.js"),["./exit-fullscreen-9dffb17a.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/eye-open.svg":()=>e(()=>import("./eye-open-901f6f23.js"),["./eye-open-901f6f23.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/eye.svg":()=>e(()=>import("./eye-92672501.js"),["./eye-92672501.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-faa99f1d.js"),["./fullscreen-faa99f1d.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/github.svg":()=>e(()=>import("./github-cd708aa6.js"),["./github-cd708aa6.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/goods-list.svg":()=>e(()=>import("./goods-list-09dcb6d5.js"),["./goods-list-09dcb6d5.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/goods.svg":()=>e(()=>import("./goods-a5ce4bef.js"),["./goods-a5ce4bef.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/guide.svg":()=>e(()=>import("./guide-18affeca.js"),["./guide-18affeca.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/homepage.svg":()=>e(()=>import("./homepage-a4ed3e73.js"),["./homepage-a4ed3e73.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/lab.svg":()=>e(()=>import("./lab-23ead976.js"),["./lab-23ead976.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/language.svg":()=>e(()=>import("./language-a58ea804.js"),["./language-a58ea804.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/link.svg":()=>e(()=>import("./link-8721752e.js"),["./link-8721752e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/menu.svg":()=>e(()=>import("./menu-b470811e.js"),["./menu-b470811e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/message.svg":()=>e(()=>import("./message-452f2c39.js"),["./message-452f2c39.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/money.svg":()=>e(()=>import("./money-e02537d3.js"),["./money-e02537d3.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/monitor.svg":()=>e(()=>import("./monitor-9c9fc957.js"),["./monitor-9c9fc957.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/multi_level.svg":()=>e(()=>import("./multi_level-01823a55.js"),["./multi_level-01823a55.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/nested.svg":()=>e(()=>import("./nested-950287cd.js"),["./nested-950287cd.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/number.svg":()=>e(()=>import("./number-e4d50c69.js"),["./number-e4d50c69.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/order.svg":()=>e(()=>import("./order-e746e01a.js"),["./order-e746e01a.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/password.svg":()=>e(()=>import("./password-9911ba6a.js"),["./password-9911ba6a.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/peoples.svg":()=>e(()=>import("./peoples-04ffdc02.js"),["./peoples-04ffdc02.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/perm.svg":()=>e(()=>import("./perm-e782e39b.js"),["./perm-e782e39b.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/publish.svg":()=>e(()=>import("./publish-531d0316.js"),["./publish-531d0316.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/rabbitmq.svg":()=>e(()=>import("./rabbitmq-d3477f53.js"),["./rabbitmq-d3477f53.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/rate.svg":()=>e(()=>import("./rate-08ba05d8.js"),["./rate-08ba05d8.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/redis.svg":()=>e(()=>import("./redis-ea37ccba.js"),["./redis-ea37ccba.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/refresh.svg":()=>e(()=>import("./refresh-5370a728.js"),["./refresh-5370a728.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/role.svg":()=>e(()=>import("./role-90508f2e.js"),["./role-90508f2e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/security.svg":()=>e(()=>import("./security-34a77361.js"),["./security-34a77361.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/shopping.svg":()=>e(()=>import("./shopping-10a687f7.js"),["./shopping-10a687f7.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/size.svg":()=>e(()=>import("./size-d0198eef.js"),["./size-d0198eef.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/skill.svg":()=>e(()=>import("./skill-b443b3ad.js"),["./skill-b443b3ad.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/system.svg":()=>e(()=>import("./system-fd51dd1e.js"),["./system-fd51dd1e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/theme.svg":()=>e(()=>import("./theme-1ead8349.js"),["./theme-1ead8349.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/tree.svg":()=>e(()=>import("./tree-c0b37dc9.js"),["./tree-c0b37dc9.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/user.svg":()=>e(()=>import("./user-c1144a5e.js"),["./user-c1144a5e.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/uv.svg":()=>e(()=>import("./uv-4b169911.js"),["./uv-4b169911.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/valid_code.svg":()=>e(()=>import("./valid_code-3a8f8020.js"),["./valid_code-3a8f8020.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url),"../../assets/icons/verify_code.svg":()=>e(()=>import("./verify_code-1fcc3375.js"),["./verify_code-1fcc3375.js","./index-863de930.js","../css/index-67916441.css"],import.meta.url)});for(const n in f){const P=n.split("assets/icons/")[1].split(".svg")[0];d.push(P)}y.value=d}function A(){D.value?y.value=d.filter(f=>f.includes(D.value)):y.value=d}function z(f){g("update:modelValue",f),a.value=!1}return ue(T,()=>a.value=!1),ie(()=>{l()}),(f,n)=>{const P=_("el-input"),L=_("Icon"),B=_("el-divider"),F=_("el-tooltip"),R=_("el-scrollbar"),q=_("el-popover");return b(),S("div",{class:"iconselect-container",ref_key:"iconSelectorRef",ref:T},[t(P,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=p=>u.value=p),readonly:"",onClick:n[1]||(n[1]=p=>a.value=!a.value),placeholder:"点击选择图标"},{prepend:o(()=>[t(oe,{"icon-class":u.value},null,8,["icon-class"])]),_:1},8,["modelValue"]),t(q,{shadow:"none",visible:a.value,placement:"bottom-end",trigger:"click",width:"400"},{reference:o(()=>[N("div",{onClick:n[2]||(n[2]=p=>a.value=!a.value),class:"cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"},[H(t(L,{icon:"ep:caret-top"},null,512),[[Z,a.value]]),H(t(L,{icon:"ep:caret-bottom"},null,512),[[Z,!a.value]])])]),default:o(()=>[t(P,{class:"p-2",modelValue:D.value,"onUpdate:modelValue":n[3]||(n[3]=p=>D.value=p),placeholder:"搜索图标",clearable:"",onInput:A},null,8,["modelValue"]),t(B,{"border-style":"dashed"}),t(R,{height:"300px"},{default:o(()=>[N("ul",he,[(b(!0),S(me,null,de(y.value,(p,G)=>(b(),S("li",{class:"icon-item",key:G,onClick:K=>z(p)},[t(F,{content:p,placement:"bottom",effect:"light"},{default:o(()=>[t(oe,{color:"var(--el-text-color-regular)","icon-class":p},null,8,["icon-class"])]),_:2},1032,["content"])],8,Ie))),128))])]),_:1})]),_:1},8,["visible"])],512)}}});const Oe=se(ye,[["__scopeId","data-v-a1f83a5a"]]),Pe={class:"app-container"},Re={class:"dialog-footer"},Te={name:"cmenu"},ke=J({...Te,name:"MenuManage",setup(h){const g=c(ee),I=c(!1),u=w({visible:!1}),a=w({visible:!1}),d=w({visible:!1}),D=c([]),y=c([]),T=c([]),l=w({label:"",level:1,path:"",icon:"",sort:1}),A=c(),z=w({label:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]}),f=c();async function n(){I.value=!0;const{error:r,data:s}=await U.query({operationName:"System/Menu/GetMany"});r||(D.value=s.data),I.value=!1}function P(r){f.value=r.id}function L(r){u.visible=!0,r?(u.title="编辑菜单",A.value=r.id,Ee(l,r)):u.title="新增菜单"}function B(){g.value.validate(async r=>{if(r){if(A.value){const{error:s}=await U.mutate({operationName:"System/Menu/UpdateOne",input:{id:A.value,...l}});s||(C.success("修改成功"),R(),n())}else{const{error:s}=await U.mutate({operationName:"System/Menu/CreateOne",input:{...l}});s||(C.success("新增成功"),R(),n())}I.value=!1}})}function F(r){if(!r)return C.warning("请勾选删除项"),!1;ve.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{error:s}=await U.mutate({operationName:"System/Menu/DeleteOne",input:{id:r}});s||(C.success("删除成功"),n())}).catch(()=>C.info("已取消删除"))}function R(){u.visible=!1,G()}function q(){a.visible=!1}function p(){d.visible=!1}function G(){g.value.resetFields(),g.value.clearValidate(),l.icon="",l.label="",l.level=1,l.path="",l.sort=1}ie(()=>{n()});function K(r){a.title="子菜单",ge(r).then(s=>{a.visible=!0,y.value=s.data.data})}function X(r){d.title="子权限",fe(r).then(s=>{d.visible=!0,T.value=s.data.data})}return(r,s)=>{const E=_("el-button"),V=_("Auth"),m=_("el-table-column"),Q=_("el-table"),le=_("el-card"),Y=_("el-input"),M=_("el-form-item"),ae=_("el-input-number"),j=_("el-dialog"),re=pe("loading");return b(),S("div",Pe,[t(le,{shadow:"never"},{header:o(()=>[t(V,{value:"/System/Menu/CreateOne"},{default:o(()=>[t(E,{type:"success",onClick:s[0]||(s[0]=i=>L())},{icon:o(()=>[t(O(k),{icon:"ep:plus"})]),default:o(()=>[v(" 新增")]),_:1})]),_:1})]),default:o(()=>[H((b(),W(Q,{data:D.value,"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:P,"row-key":"id","default-expand-all":"",border:""},{default:o(()=>[t(m,{label:"菜单名称",width:"200",prop:"label"}),t(m,{label:"菜单路径",align:"center",width:"150",prop:"path"}),t(m,{label:"排序",align:"center",width:"100",prop:"sort"}),t(m,{fixed:"right",align:"center",label:"操作","min-width":"220"},{default:o(i=>[t(V,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>L(i.row),["stop"])},{default:o(()=>[t(O(k),{icon:"ep:edit"}),v("编辑 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/DeleteOne"},{default:o(()=>[t(E,{type:"primary",link:"",size:"small",onClick:x($=>F(i.row.id),["stop"])},{default:o(()=>[t(O(k),{icon:"ep:delete"}),v("删除 ")]),_:2},1032,["onClick"])]),_:2},1024),t(V,{value:"/System/Menu/GetChildrenMenus"},{default:o(()=>[i.row.is_bottom?te("",!0):(b(),W(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>K(i.row.id),["stop"])},{default:o(()=>[t(O(k),{icon:"ep:edit"}),v("子菜单 ")]),_:2},1032,["onClick"]))]),_:2},1024),t(V,{value:"/System/Menu/GetMenuPerms"},{default:o(()=>[i.row.is_bottom?(b(),W(E,{key:0,type:"primary",link:"",size:"small",onClick:x($=>X(i.row.id),["stop"])},{default:o(()=>[t(O(k),{icon:"ep:edit"}),v("子权限 ")]),_:2},1032,["onClick"])):te("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[re,I.value]])]),_:1}),t(j,{title:u.title,modelValue:u.visible,"onUpdate:modelValue":s[5]||(s[5]=i=>u.visible=i),onClose:R,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:o(()=>[N("div",Re,[t(V,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{type:"primary",onClick:B},{default:o(()=>[v("确 定")]),_:1})]),_:1}),t(V,{value:"/System/Menu/UpdateOne"},{default:o(()=>[t(E,{onClick:R},{default:o(()=>[v("取 消")]),_:1})]),_:1})])]),default:o(()=>[t(O(ee),{ref_key:"menuFormRef",ref:g,model:l,rules:z,"label-width":"100px"},{default:o(()=>[t(M,{label:"菜单名称",prop:"label"},{default:o(()=>[t(Y,{modelValue:l.label,"onUpdate:modelValue":s[1]||(s[1]=i=>l.label=i),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),t(M,{label:"路由路径",prop:"path"},{default:o(()=>[t(Y,{modelValue:l.path,"onUpdate:modelValue":s[2]||(s[2]=i=>l.path=i),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])]),_:1}),t(M,{label:"图标",prop:"icon"},{default:o(()=>[t(Oe,{modelValue:l.icon,"onUpdate:modelValue":s[3]||(s[3]=i=>l.icon=i)},null,8,["modelValue"])]),_:1}),t(M,{label:"排序",prop:"sort"},{default:o(()=>[t(ae,{modelValue:l.sort,"onUpdate:modelValue":s[4]||(s[4]=i=>l.sort=i),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(j,{title:a.title,modelValue:a.visible,"onUpdate:modelValue":s[6]||(s[6]=i=>a.visible=i),onClose:q,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(Q,{data:y.value,style:{width:"100%"}},{default:o(()=>[t(m,{label:"菜单名称",width:"180",prop:"label"}),t(m,{label:"菜单路径",width:"200",prop:"path"}),t(m,{label:"排序",align:"center",width:"160",prop:"sort"}),t(m,{fixed:"right",align:"center",label:"操作"},{default:o(i=>[t(V,{value:"System/Menu/GetMenuPerms"}),t(E,{type:"primary",link:"",size:"small",onClick:x($=>X(i.row.id),["stop"])},{default:o(()=>[v(" 子权限 ")]),_:2},1032,["onClick"])]),_:1}),v("> ")]),_:1},8,["data"])]),_:1},8,["title","modelValue"]),t(j,{title:d.title,modelValue:d.visible,"onUpdate:modelValue":s[7]||(s[7]=i=>d.visible=i),onClose:p,"destroy-on-close":"",appendToBody:"",width:"750px"},{default:o(()=>[t(Q,{data:T.value,style:{width:"100%"}},{default:o(()=>[t(m,{label:"创建时间",width:"200",prop:"createdAt"}),t(m,{label:"是否启用",align:"center",width:"180"},{default:o(i=>[v(ce(i===0?"否":"是"),1)]),_:1}),t(m,{label:"方法",align:"center",width:"100",prop:"method"}),t(m,{label:"路径",width:"240",prop:"path"})]),_:1},8,["data"])]),_:1},8,["title","modelValue"])])}}});export{ke as default};
