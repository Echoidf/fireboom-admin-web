import{aX as re,aL as ne,aG as se}from"./index-d0b35c07.js";var X={},T={},Y={},L={},Z={},D={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OBJECT=t.isUndefined=t.isFunction=t.UNDEFINED=t.noop=void 0;const e=()=>{};t.noop=e,t.UNDEFINED=(0,t.noop)();const r=i=>typeof i=="function";t.isFunction=r;const n=i=>i===t.UNDEFINED;t.isUndefined=n,t.OBJECT=Object})(D);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stableHash=void 0;const e=D,r=new WeakMap;let n=0;const i=s=>{const o=typeof s,u=s&&s.constructor,l=u==Date;let a,c;if((0,e.OBJECT)(s)===s&&!l&&u!=RegExp){if(a=r.get(s),a)return a;if(a=++n+"~",r.set(s,a),u==Array){for(a="@",c=0;c<s.length;c++)a+=(0,t.stableHash)(s[c])+",";r.set(s,a)}if(u==e.OBJECT){a="#";const f=e.OBJECT.keys(s).sort();for(;!(0,e.isUndefined)(c=f.pop());)(0,e.isUndefined)(s[c])||(a+=c+":"+(0,t.stableHash)(s[c])+",");r.set(s,a)}}else a=l?s.toJSON():o=="symbol"?s.toString():o=="string"?JSON.stringify(s):""+s;return a};t.stableHash=i})(Z);Object.defineProperty(L,"__esModule",{value:!0});L.serialize=void 0;const ie=Z,oe=D,ae=t=>ue(t)[0];L.serialize=ae;const ue=t=>{if((0,oe.isFunction)(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?(0,ie.stableHash)(t):"",[t,e]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=L;Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}})})(Y);var R={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.ResponseError=void 0;class G extends Error{constructor(e="Response is not OK",r){super(e),this.message=e,this.statusCode=r,this.errors=void 0,this.name="ResponseError",Object.setPrototypeOf(this,G.prototype)}}m.ResponseError=G;Object.defineProperty(R,"__esModule",{value:!0});R.GraphQLResponseError=void 0;const le=m;class F extends le.ResponseError{constructor(e){super(e[0].message,200),this.errors=e,this.name="GraphQLError",Object.setPrototypeOf(this,F.prototype)}}R.GraphQLResponseError=F;var g={};Object.defineProperty(g,"__esModule",{value:!0});g.InputValidationError=void 0;const ce=m;class H extends ce.ResponseError{constructor(e,r){super(e.message,r),this.statusCode=r,this.name="InputValidationError",this.errors=e.errors,Object.setPrototypeOf(this,H.prototype)}}g.InputValidationError=H;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.AuthorizationError=void 0;const fe=m;class z extends fe.ResponseError{constructor(e="Not authorized",r){super(e,r),this.message=e,this.statusCode=r,this.name="AuthorizationError",Object.setPrototypeOf(this,z.prototype)}}U.AuthorizationError=z;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var he=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),de=Object.prototype.hasOwnProperty;function q(t,e){return de.call(t,e)}function I(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var n=[];for(var i in t)q(t,i)&&n.push(i);return n}function p(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function C(t){for(var e=0,r=t.length,n;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function w(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function j(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function M(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(M(t[e]))return!0}else if(typeof t=="object"){for(var n=I(t),i=n.length,s=0;s<i;s++)if(M(t[n[s]]))return!0}}return!1}function x(t,e){var r=[t];for(var n in e){var i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&r.push(n+": "+i)}return r.join(`
`)}var $=function(t){he(e,t);function e(r,n,i,s,o){var u=this.constructor,l=t.call(this,x(r,{name:n,index:i,operation:s,tree:o}))||this;return l.name=n,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,u.prototype),l.message=x(r,{name:n,index:i,operation:s,tree:o}),l}return e}(Error),h=$,pe=p,A={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){var n=O(r,this.path);n&&(n=p(n));var i=y(r,{op:"remove",path:this.from}).removed;return y(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){var n=O(r,this.from);return y(r,{op:"add",path:this.path,value:p(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:E(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},ve={add:function(t,e,r){return C(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:A.move,copy:A.copy,test:A.test,_get:A._get};function O(t,e){if(e=="")return t;var r={op:"_get",path:e};return y(t,r),r.value}function y(t,e,r,n,i,s){if(r===void 0&&(r=!1),n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=0),r&&(typeof r=="function"?r(e,0,t,e.path):S(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=O(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=E(t,e.value),o.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(r)throw new h("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return o}}else{n||(t=p(t));var u=e.path||"",l=u.split("/"),a=t,c=1,f=l.length,v=void 0,d=void 0,N=void 0;for(typeof r=="function"?N=r:N=S;;){if(d=l[c],d&&d.indexOf("~")!=-1&&(d=j(d)),i&&(d=="__proto__"||d=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&v===void 0&&(a[d]===void 0?v=l.slice(0,c).join("/"):c==f-1&&(v=e.path),v!==void 0&&N(e,0,t,v)),c++,Array.isArray(a)){if(d==="-")d=a.length;else{if(r&&!C(d))throw new h("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);C(d)&&(d=~~d)}if(c>=f){if(r&&e.op==="add"&&d>a.length)throw new h("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var o=ve[e.op].call(e,a,d,t);if(o.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}}else if(c>=f){var o=A[e.op].call(e,a,d,t);if(o.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}if(a=a[d],r&&c<f&&(!a||typeof a!="object"))throw new h("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function b(t,e,r,n,i){if(n===void 0&&(n=!0),i===void 0&&(i=!0),r&&!Array.isArray(e))throw new h("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=p(t));for(var s=new Array(e.length),o=0,u=e.length;o<u;o++)s[o]=y(t,e[o],r,!0,i,o),t=s[o].newDocument;return s.newDocument=t,s}function V(t,e,r){var n=y(t,e);if(n.test===!1)throw new h("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function S(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new h("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(A[t.op]){if(typeof t.path!="string")throw new h("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new h('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new h("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new h("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&M(t.value))throw new h("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new h("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new h("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},u=J([o],r);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new h("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new h("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function J(t,e,r){try{if(!Array.isArray(t))throw new h("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)b(p(e),p(t),r||!0);else{r=r||S;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof h)return i;throw i}}function E(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,o;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!E(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var u=Object.keys(t);if(s=u.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(u[i]))return!1;for(i=s;i--!==0;)if(o=u[i],!E(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}const we=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:h,_areEquals:E,applyOperation:y,applyPatch:b,applyReducer:V,deepClone:pe,getValueByPointer:O,validate:J,validator:S},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var B=new WeakMap,ye=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),me=function(){function t(e,r){this.callback=e,this.observer=r}return t}();function Ae(t){return B.get(t)}function Ee(t,e){return t.observers.get(e)}function _e(t,e){t.observers.delete(e.callback)}function k(t,e){e.unobserve()}function ee(t,e){var r=[],n,i=Ae(t);if(!i)i=new ye(t),B.set(t,i);else{var s=Ee(i,e);n=s&&s.observer}if(n)return n;if(n={},i.value=p(t),e){n.callback=e,n.next=null;var o=function(){P(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return n.patches=r,n.object=t,n.unobserve=function(){P(n),clearTimeout(n.next),_e(i,n),typeof window<"u"&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},i.observers.set(e,new me(e,n)),n}function P(t,e){e===void 0&&(e=!1);var r=B.get(t.object);Q(r.value,t.object,t.patches,"",e),t.patches.length&&b(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function Q(t,e,r,n,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=I(e),o=I(t),u=!1,l=o.length-1;l>=0;l--){var a=o[l],c=t[a];if(q(e,a)&&!(e[a]===void 0&&c!==void 0&&Array.isArray(e)===!1)){var f=e[a];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Q(c,f,r,n+"/"+w(a),i):c!==f&&(i&&r.push({op:"test",path:n+"/"+w(a),value:p(c)}),r.push({op:"replace",path:n+"/"+w(a),value:p(f)}))}else Array.isArray(t)===Array.isArray(e)?(i&&r.push({op:"test",path:n+"/"+w(a),value:p(c)}),r.push({op:"remove",path:n+"/"+w(a)}),u=!0):(i&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}))}if(!(!u&&s.length==o.length))for(var l=0;l<s.length;l++){var a=s[l];!q(t,a)&&e[a]!==void 0&&r.push({op:"add",path:n+"/"+w(a),value:p(e[a])})}}}function te(t,e,r){r===void 0&&(r=!1);var n=[];return Q(t,e,n,"",r),n}const Oe=Object.freeze(Object.defineProperty({__proto__:null,compare:te,generate:P,observe:ee,unobserve:k},Symbol.toStringTag,{value:"Module"})),Se=Object.assign({},we,Oe,{JsonPatchError:$,deepClone:p,escapePathComponent:w,unescapePathComponent:j}),Re=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:$,_areEquals:E,applyOperation:y,applyPatch:b,applyReducer:V,compare:te,deepClone:p,default:Se,escapePathComponent:w,generate:P,getValueByPointer:O,observe:ee,unescapePathComponent:j,unobserve:k,validate:J,validator:S},Symbol.toStringTag,{value:"Module"})),ge=re(Re);Object.defineProperty(T,"__esModule",{value:!0});T.Client=void 0;const Pe=Y,Te=R,_=m,Le=g,Ue=U,W=ge;class be{constructor(e){var r;this.options=e,this.baseHeaders={},this.extraHeaders={},this.csrfEnabled=!0,this.baseHeaders={"WG-SDK-Version":e.sdkVersion},this.extraHeaders={...e.extraHeaders},this.csrfEnabled=(r=e.csrfEnabled)!==null&&r!==void 0?r:!0}static buildCacheKey(e){return(0,Pe.serialize)(e)}isAuthenticatedOperation(e){var r,n;return!!(!((n=(r=this.options.operationMetadata)===null||r===void 0?void 0:r[e])===null||n===void 0)&&n.requiresAuthentication)}operationUrl(e){return this.options.baseURL+"/operations/"+e}addUrlParams(e,r){r.sort();const n=this.encodeQueryParams(r);return e+(n?`?${n}`:"")}encodeQueryParams(e){const n=e.toString().replace("=&","&");return n.endsWith("=")?n.slice(0,-1):n}async fetchJson(e,r={}){return r.headers={...r.headers,Accept:"application/json","Content-Type":"application/json"},this.fetch(e,r)}async fetch(e,r={}){const n=this.options.customFetch||globalThis.fetch;return r.headers={...this.baseHeaders,...this.extraHeaders,...r.headers},n(e,{credentials:"include",mode:"cors",...r})}convertGraphQLResponse(e){return e.errors&&e.errors.length?{error:new Te.GraphQLResponseError(e.errors)}:e.data?{data:e.data}:{error:new _.ResponseError("Invalid response from the server",200)}}async handleClientResponseError(e){var r,n;const i=await e.text();try{const s=JSON.parse(i);switch(e.status){case 401:return new Ue.AuthorizationError((r=s.errors[0])===null||r===void 0?void 0:r.message.trim(),e.status);case 400:return new Le.InputValidationError(s,e.status);default:return new _.ResponseError((((n=s.errors[0])===null||n===void 0?void 0:n.message)||s.message).trim(),e.status)}}catch{return new _.ResponseError(i.length?i.trim():"Response is not OK",e.status)}}async fetchResponseToClientResponse(e){if(!e.ok)return{error:await this.handleClientResponseError(e)};const r=await e.json();return this.convertGraphQLResponse({data:r.data,errors:r.errors})}stringifyInput(e){const r=JSON.stringify(e||{});return r==="{}"?void 0:r}setExtraHeaders(e){this.extraHeaders={...this.extraHeaders,...e}}setAuthorizationToken(e){this.setExtraHeaders({Authorization:`Bearer ${e}`})}unsetAuthorization(){delete this.extraHeaders.Authorization}async query(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash}),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.subscribeOnce&&r.set("wg_subscribe_once","");const i=this.addUrlParams(this.operationUrl(e.operationName),r),s=await this.fetchJson(i,{method:"GET",signal:e.abortSignal});return this.fetchResponseToClientResponse(s)}async getCSRFToken(){if(!this.csrfToken){const e=await this.fetch(`${this.options.baseURL}/auth/cookie/csrf`,{headers:{...this.baseHeaders,Accept:"text/plain"}});if(this.csrfToken=await e.text(),!this.csrfToken)throw new Error("Failed to get CSRF token. Please make sure you are authenticated.")}return this.csrfToken}async mutate(e){const r=this.addUrlParams(this.operationUrl(e.operationName),new URLSearchParams({wg_api_hash:this.options.applicationHash})),n={};this.isAuthenticatedOperation(e.operationName)&&this.csrfEnabled&&(n["X-CSRF-Token"]=await this.getCSRFToken());const i=await this.fetchJson(r,{method:"POST",signal:e.abortSignal,body:this.stringifyInput(e.input),headers:n});return this.fetchResponseToClientResponse(i)}async fetchUser(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash});e!=null&&e.revalidate&&r.set("revalidate","");const n=await this.fetchJson(this.addUrlParams(`${this.options.baseURL}/auth/user`,r),{method:"GET",signal:e==null?void 0:e.abortSignal});if(!n.ok)throw await this.handleClientResponseError(n);return n.json()}async subscribe(e,r){if(e.subscribeOnce){const n=await this.query(e);return r(n),n}if("EventSource"in globalThis)return this.subscribeWithSSE(e,r);for await(const n of this.subscribeWithFetch(e))r(n)}subscribeWithSSE(e,r){return new Promise((n,i)=>{const s=new URLSearchParams({wg_api_hash:this.options.applicationHash,wg_sse:"",wg_json_patch:""}),o=this.stringifyInput(e.input);o&&s.set("wg_variables",o),e.liveQuery&&s.set("wg_live","");const u=this.addUrlParams(this.operationUrl(e.operationName),s),l=new EventSource(u,{withCredentials:!0});l.addEventListener("error",()=>{i(new Error(`SSE connection error: ${e.operationName}`))}),l.addEventListener("open",()=>{n()});let a=null;l.addEventListener("message",c=>{if(c.data==="done"){l.close();return}const f=JSON.parse(c.data);a!==null&&Array.isArray(f)?a=(0,W.applyPatch)(a,f,!0,!1,!0).newDocument:a=f;const v=this.convertGraphQLResponse(a);r(v)}),e!=null&&e.abortSignal&&(e==null||e.abortSignal.addEventListener("abort",()=>l.close()))})}async*subscribeWithFetch(e){const r=new URLSearchParams({wg_api_hash:this.options.applicationHash}),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.liveQuery&&r.set("wg_live","");const i=this.addUrlParams(this.operationUrl(e.operationName),r),s=await this.fetchJson(i,{method:"GET",signal:e.abortSignal});if(!s.ok||s.body===null){yield{error:new _.ResponseError("HTTP Error",s.status)};return}const o=s.body.getReader(),u=new TextDecoder;let l="",a=null;for(;;){const{value:c,done:f}=await o.read();if(f)return;if(c&&(l+=u.decode(c),l.endsWith(`

`))){const v=JSON.parse(l.substring(0,l.length-2));a!==null&&Array.isArray(v)?a=(0,W.applyPatch)(a,v).newDocument:a=v,yield this.convertGraphQLResponse(a),l=""}}}async uploadFiles(e,r){var n;this.validateFiles(e,r);const i=new FormData;for(const[c,f]of Object.entries(e.files))f instanceof Blob&&i.append("files",f);const s={};this.csrfEnabled&&(!((n=r==null?void 0:r.requireAuthentication)!==null&&n!==void 0)||n)&&(s["X-CSRF-Token"]=await this.getCSRFToken());const o=new URLSearchParams({wg_api_hash:this.options.applicationHash});"profile"in e&&(s["X-Upload-Profile"]=e.profile),"meta"in e&&(s["X-Metadata"]=e.meta?JSON.stringify(e.meta):"");const u=await this.fetch(this.addUrlParams(`${this.options.baseURL}/s3/${e.provider}/upload`,o),{headers:s,body:i,method:"POST",signal:e.abortSignal});if(!u.ok)throw await this.handleClientResponseError(u);const l=await u.json();if(!l.length)throw new _.ResponseError("Invalid server response shape",u.status);return{fileKeys:l.map(c=>c.key)}}validateFiles(e,r){if(r!=null&&r.maxAllowedFiles&&e.files.length>r.maxAllowedFiles)throw new Error(`uploading ${e.files.length} exceeds the maximum allowed (${r.maxAllowedFiles})`);for(const n of e.files){if(r!=null&&r.maxAllowedUploadSizeBytes&&n.size>r.maxAllowedUploadSizeBytes)throw new Error(`file ${n.name} with size ${n.size} exceeds the maximum allowed (${r.maxAllowedUploadSizeBytes})`);if(r!=null&&r.allowedFileExtensions&&n.name.includes(".")){const i=n.name.substring(n.name.indexOf(".")+1).toLowerCase();if(i&&r.allowedFileExtensions.findIndex(s=>s.toLocaleLowerCase())<0)throw new Error(`file ${n.name} with extension ${i} is not allowed`)}if(r!=null&&r.allowedMimeTypes){const i=n.type;if(r.allowedMimeTypes.findIndex(o=>o==i?!0:i.match(new RegExp(o.replace("*",".*"))))<0)throw new Error(`file ${n.name} with MIME type ${i} is not allowed`)}}}login(e,r){if(typeof window>"u")throw new Error("login() can only be called in a browser environment");const n=new URLSearchParams({redirect_uri:r||window.location.toString()}),i=this.addUrlParams(`${this.options.baseURL}/auth/cookie/authorize/${e}`,n);window.location.assign(i)}async logout(e){var r;if(typeof window>"u")throw new Error("logout() can only be called in a browser environment");const n=new URLSearchParams({logout_openid_connect_provider:e!=null&&e.logoutOpenidConnectProvider?"true":"false"}),i=this.addUrlParams(`${this.options.baseURL}/auth/cookie/user/logout`,n),s=await this.fetch(i,{method:"GET"});if(!s.ok)return!1;let o=!0;if(!((r=s.headers.get("Content-Type"))===null||r===void 0)&&r.includes("application/json")){const u=await s.json();u.redirect&&(e!=null&&e.redirect?o=await e.redirect(u.redirect):window.location.href=u.redirect)}return o&&(e!=null&&e.after)&&e.after(),o}}T.Client=be;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseError=t.InputValidationError=t.GraphQLResponseError=t.Client=void 0;var e=T;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return e.Client}});var r=R;Object.defineProperty(t,"GraphQLResponseError",{enumerable:!0,get:function(){return r.GraphQLResponseError}});var n=g;Object.defineProperty(t,"InputValidationError",{enumerable:!0,get:function(){return n.InputValidationError}});var i=m;Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return i.ResponseError}})})(X);const Ne={tengxunyun:{}},qe={applicationHash:"2109afdc",baseURL:"http://localhost:9991",sdkVersion:""},Ie={"Casdoor/GetRolesById":{requiresAuthentication:!1},"Casdoor/Login":{requiresAuthentication:!1},"Casdoor/RefreshToken":{requiresAuthentication:!1},"Casdoor/SendCode":{requiresAuthentication:!1},"Casdoor/UpdateSMSProvider":{requiresAuthentication:!0},"Post/CreateOne":{requiresAuthentication:!0},"Post/DeleteMany":{requiresAuthentication:!0},"Post/DeleteOne":{requiresAuthentication:!0},"Post/GetList":{requiresAuthentication:!0},"Post/GetOne":{requiresAuthentication:!0},"Post/UpdateOne":{requiresAuthentication:!0},"Statistics/MonthlySales":{requiresAuthentication:!1},"Statistics/QueryRaw":{requiresAuthentication:!1},"Statistics/SaleTypePercent":{requiresAuthentication:!1},"Statistics/SalesTop10":{requiresAuthentication:!1},"Statistics/VisitTrending":{requiresAuthentication:!1},"System/GetMenus":{requiresAuthentication:!0},"System/Log/ChangeOpen":{requiresAuthentication:!0},"System/Log/CreateLog":{requiresAuthentication:!1},"System/Log/GetAllLog":{requiresAuthentication:!1},"System/Log/GetIsOpen":{requiresAuthentication:!0},"System/Log/GetLog":{requiresAuthentication:!1},"System/Menu/CreateOne":{requiresAuthentication:!0},"System/Menu/DeleteMany":{requiresAuthentication:!0},"System/Menu/DeleteOne":{requiresAuthentication:!0},"System/Menu/GetApiList":{requiresAuthentication:!0},"System/Menu/GetApisByMenus":{requiresAuthentication:!0},"System/Menu/GetChildrenMenus":{requiresAuthentication:!0},"System/Menu/GetList":{requiresAuthentication:!0},"System/Menu/GetMany":{requiresAuthentication:!0},"System/Menu/GetMenuByLevelOrPid":{requiresAuthentication:!1},"System/Menu/GetOne":{requiresAuthentication:!0},"System/Menu/UpdateOne":{requiresAuthentication:!0},"System/Operation/GetMany":{requiresAuthentication:!1},"System/Perm/CreateMany":{requiresAuthentication:!0},"System/Perm/GetBindPerms":{requiresAuthentication:!1},"System/Perm/GetRolePerms":{requiresAuthentication:!1},"System/Role/AddOne":{requiresAuthentication:!0},"System/Role/BindMenus":{requiresAuthentication:!1},"System/Role/BindRoleApis":{requiresAuthentication:!1},"System/Role/DeleteMany":{requiresAuthentication:!1},"System/Role/DeleteOne":{requiresAuthentication:!0},"System/Role/GetList":{requiresAuthentication:!0},"System/Role/GetMany":{requiresAuthentication:!1},"System/Role/GetOne":{requiresAuthentication:!0},"System/Role/GetRoleMenuId":{requiresAuthentication:!1},"System/Role/UnBindMenus":{requiresAuthentication:!1},"System/Role/UnBindRoleApis":{requiresAuthentication:!1},"System/Role/UpdateOne":{requiresAuthentication:!0},"System/Sub/CreateSub":{requiresAuthentication:!0},"System/Sub/SSE":{requiresAuthentication:!1},"System/User/ConnectRole":{requiresAuthentication:!1},"System/User/CountUsers":{requiresAuthentication:!0},"System/User/CreateOne":{requiresAuthentication:!0},"System/User/DeleteOne":{requiresAuthentication:!0},"System/User/DisconnectRole":{requiresAuthentication:!1},"System/User/GetAllList":{requiresAuthentication:!0},"System/User/GetLikeUser":{requiresAuthentication:!0},"System/User/GetList":{requiresAuthentication:!0},"System/User/GetOne":{requiresAuthentication:!0},"System/User/GetRoleUsers":{requiresAuthentication:!1},"System/User/GetUserRole":{requiresAuthentication:!1},"System/User/UpdateOne":{requiresAuthentication:!1}};class Ce extends X.Client{query(e){return super.query(e)}mutate(e){return super.mutate(e)}subscribe(e,r){return super.subscribe(e,r)}async uploadFiles(e){const r=e.profile?Ne[e.provider][e.profile]:void 0;return super.uploadFiles(e,r)}login(e,r){return super.login(e,r)}async fetchUser(e){return super.fetchUser(e)}}const Me=t=>new Ce({...qe,...t,operationMetadata:Ie,csrfEnabled:!1}),Ge=Me({baseURL:"",extraHeaders:{Authorization:ne(se().accessToken)}});function K(t){return t!=null&&t!==""}function Fe(t,e){const{pageNum:r,pageSize:n,...i}=t,s={skip:(r-1)*n,take:n||10,query:{}};if(Object.keys(i).length){if(e!=null&&e.containsFields)for(const o of e.containsFields)K(t[o])&&(s.query[o]={contains:t[o]});if(e!=null&&e.equalsFields)for(const o of e.equalsFields)K(t[o])&&(s.query[o]={equals:t[o]})}return Object.keys(s.query)||delete s.query,s}export{Ge as a,Fe as c};
